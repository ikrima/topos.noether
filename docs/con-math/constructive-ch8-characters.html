<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Characters & The Dual Group ‚Äî Chapter 8</title>
  <link href="https://fonts.googleapis.com/css2?family=Crimson+Text:ital,wght@0,400;0,600;1,400&family=Source+Sans+Pro:wght@300;400;600&family=JetBrains+Mono:wght@400;500&display=swap" rel="stylesheet">
  <style>
    :root {
      --character-teal: #14B8A6;
      --dual-purple: #8B5CF6;
      --product-amber: #F59E0B;
      --homom-blue: #3B82F6;
      --background: #FAF8F5;
      --background-dark: #0F0F12;
      --ink: #1A1A1A;
      --ink-light: #FAF8F5;
      
      --display: 'Crimson Text', serif;
      --body: 'Source Sans Pro', sans-serif;
      --mono: 'JetBrains Mono', monospace;
      
      --ease-out-expo: cubic-bezier(0.16, 1, 0.3, 1);
    }

    * { margin: 0; padding: 0; box-sizing: border-box; }
    html { scroll-behavior: smooth; }
    body {
      font-family: var(--body);
      background: var(--background);
      color: var(--ink);
      line-height: 1.7;
      overflow-x: hidden;
    }

    .opening {
      min-height: 100vh;
      display: flex;
      flex-direction: column;
      justify-content: center;
      align-items: center;
      padding: 2rem;
      background: linear-gradient(135deg, var(--character-teal) 0%, #0D9488 100%);
      color: var(--ink-light);
    }

    .opening-content {
      text-align: center;
      max-width: 800px;
    }

    .chapter-label {
      font-family: var(--mono);
      font-size: 0.7rem;
      letter-spacing: 0.2em;
      text-transform: uppercase;
      color: rgba(255,255,255,0.7);
      margin-bottom: 0.5rem;
      opacity: 0;
      animation: fadeUp 0.8s var(--ease-out-expo) 0.2s forwards;
    }

    .section-label {
      font-family: var(--mono);
      font-size: 0.7rem;
      letter-spacing: 0.2em;
      text-transform: uppercase;
      color: rgba(255,255,255,0.9);
      margin-bottom: 1rem;
      opacity: 0;
      animation: fadeUp 0.8s var(--ease-out-expo) 0.3s forwards;
    }

    .main-title {
      font-family: var(--display);
      font-size: clamp(2rem, 6vw, 3.5rem);
      font-weight: 400;
      line-height: 1.2;
      margin-bottom: 1.5rem;
      opacity: 0;
      animation: fadeUp 0.8s var(--ease-out-expo) 0.4s forwards;
    }

    .subtitle {
      font-size: 1.15rem;
      color: rgba(255, 255, 255, 0.9);
      max-width: 600px;
      margin: 0 auto;
      opacity: 0;
      animation: fadeUp 0.8s var(--ease-out-expo) 0.6s forwards;
    }

    @keyframes fadeUp {
      from { opacity: 0; transform: translateY(20px); }
      to { opacity: 1; transform: translateY(0); }
    }

    .narrative-section {
      min-height: 60vh;
      display: flex;
      align-items: center;
      justify-content: center;
      padding: 4rem 2rem;
    }

    .narrative-section.dark {
      background: var(--background-dark);
      color: var(--ink-light);
    }

    .narrative-content {
      max-width: 650px;
      opacity: 0;
      transform: translateY(30px);
      transition: opacity 0.8s var(--ease-out-expo), transform 0.8s var(--ease-out-expo);
    }

    .narrative-content.visible {
      opacity: 1;
      transform: translateY(0);
    }

    .narrative-content p {
      font-size: 1.2rem;
      margin-bottom: 1.5rem;
    }

    .math-display {
      font-family: var(--mono);
      font-size: 0.9rem;
      background: rgba(20, 184, 166, 0.1);
      padding: 1.5rem;
      border-radius: 8px;
      text-align: left;
      margin: 1.5rem 0;
      border-left: 3px solid var(--character-teal);
    }

    .dark .math-display {
      background: rgba(20, 184, 166, 0.15);
    }

    .section-header {
      text-align: center;
      margin-bottom: 3rem;
    }

    .section-title {
      font-family: var(--display);
      font-size: 2rem;
      margin-bottom: 0.5rem;
    }

    .section-subtitle {
      color: #666;
      font-size: 1rem;
      max-width: 600px;
      margin: 0 auto;
    }

    /* Characters Section */
    .char-section {
      padding: 4rem 2rem;
      background: linear-gradient(180deg, #F5F3F0 0%, var(--background) 100%);
    }

    .char-container {
      max-width: 1000px;
      margin: 0 auto;
    }

    .char-panel {
      background: white;
      border-radius: 16px;
      box-shadow: 0 4px 30px rgba(0, 0, 0, 0.08);
      padding: 2rem;
    }

    .char-canvas-container {
      height: 300px;
      background: #FAFAFA;
      border-radius: 12px;
      margin-bottom: 1.5rem;
    }

    #charCanvas {
      width: 100%;
      height: 100%;
    }

    .char-controls {
      display: flex;
      justify-content: center;
      gap: 2rem;
      margin-bottom: 1.5rem;
      flex-wrap: wrap;
    }

    .control-group {
      display: flex;
      flex-direction: column;
      align-items: center;
      gap: 0.5rem;
    }

    .control-label {
      font-family: var(--mono);
      font-size: 0.7rem;
      letter-spacing: 0.1em;
      text-transform: uppercase;
      color: #666;
    }

    .slider-container {
      display: flex;
      align-items: center;
      gap: 0.5rem;
    }

    input[type="range"] {
      width: 180px;
      accent-color: var(--character-teal);
    }

    .slider-value {
      font-family: var(--mono);
      font-size: 1rem;
      min-width: 60px;
      color: var(--character-teal);
    }

    .char-info {
      display: grid;
      grid-template-columns: repeat(2, 1fr);
      gap: 1rem;
    }

    @media (max-width: 600px) {
      .char-info { grid-template-columns: 1fr; }
    }

    .info-card {
      background: #FAFAFA;
      padding: 1rem;
      border-radius: 10px;
      text-align: center;
    }

    .info-label {
      font-family: var(--mono);
      font-size: 0.6rem;
      letter-spacing: 0.1em;
      text-transform: uppercase;
      color: #666;
      margin-bottom: 0.3rem;
    }

    .info-value {
      font-family: var(--mono);
      font-size: 0.95rem;
    }

    /* Dual Group Section */
    .dual-section {
      min-height: 80vh;
      padding: 4rem 2rem;
      background: var(--background-dark);
      color: var(--ink-light);
    }

    .dual-container {
      max-width: 900px;
      margin: 0 auto;
    }

    .dual-panel {
      background: rgba(30, 30, 40, 0.5);
      border: 1px solid rgba(107, 114, 128, 0.3);
      border-radius: 16px;
      padding: 2rem;
    }

    .theorem-card {
      background: rgba(139, 92, 246, 0.15);
      border: 2px solid var(--dual-purple);
      border-radius: 12px;
      padding: 1.5rem;
      margin-bottom: 1.5rem;
    }

    .theorem-card h3 {
      font-family: var(--display);
      font-size: 1.2rem;
      color: var(--dual-purple);
      margin-bottom: 0.5rem;
    }

    .theorem-card p {
      font-size: 0.95rem;
      color: #9CA3AF;
    }

    .examples-grid {
      display: grid;
      grid-template-columns: repeat(3, 1fr);
      gap: 1rem;
    }

    @media (max-width: 700px) {
      .examples-grid { grid-template-columns: 1fr; }
    }

    .example-card {
      background: rgba(0, 0, 0, 0.2);
      padding: 1rem;
      border-radius: 10px;
      text-align: center;
    }

    .example-card .group {
      font-family: var(--mono);
      font-size: 1.1rem;
      color: var(--character-teal);
      margin-bottom: 0.5rem;
    }

    .example-card .dual {
      font-family: var(--mono);
      font-size: 0.9rem;
      color: #9CA3AF;
    }

    .example-card .char {
      font-size: 0.8rem;
      color: #6B7280;
      margin-top: 0.3rem;
    }

    /* Homomorphism Section */
    .homom-section {
      padding: 4rem 2rem;
      background: var(--background);
    }

    .homom-container {
      max-width: 800px;
      margin: 0 auto;
    }

    .homom-panel {
      background: white;
      border-radius: 16px;
      box-shadow: 0 4px 30px rgba(0, 0, 0, 0.08);
      padding: 2rem;
    }

    .homom-theorem {
      background: rgba(59, 130, 246, 0.1);
      border: 2px solid var(--homom-blue);
      padding: 1.5rem;
      border-radius: 12px;
    }

    .homom-theorem h3 {
      font-family: var(--display);
      font-size: 1.2rem;
      color: var(--homom-blue);
      margin-bottom: 0.5rem;
    }

    .homom-theorem p {
      font-size: 0.95rem;
      color: #666;
    }

    .homom-formula {
      font-family: var(--mono);
      font-size: 1.1rem;
      color: var(--homom-blue);
      text-align: center;
      margin: 1rem 0;
    }

    /* Navigation */
    .next-section {
      padding: 4rem 2rem;
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: center;
      background: linear-gradient(135deg, var(--character-teal) 0%, #0D9488 100%);
      color: var(--ink-light);
      text-align: center;
    }

    .next-label {
      font-family: var(--mono);
      font-size: 0.7rem;
      letter-spacing: 0.2em;
      text-transform: uppercase;
      color: rgba(255,255,255,0.7);
      margin-bottom: 1rem;
    }

    .next-title {
      font-family: var(--display);
      font-size: 1.6rem;
      margin-bottom: 0.5rem;
    }

    .next-description {
      font-size: 1rem;
      color: rgba(255, 255, 255, 0.9);
      max-width: 500px;
    }
  </style>
</head>
<body>

  <!-- Opening -->
  <section class="opening">
    <div class="opening-content">
      <p class="chapter-label">Chapter 8: Locally Compact Abelian Groups</p>
      <p class="section-label">Section 3: The Character Group</p>
      <h1 class="main-title">Characters & The Dual Group</h1>
      <p class="subtitle">Characters are the "frequency components" ‚Äî homomorphisms Œ±: G ‚Üí ùïã. They form a group G*, the dual of G.</p>
    </div>
  </section>

  <!-- Narrative: Characters -->
  <section class="narrative-section">
    <div class="narrative-content" data-animate>
      <p>A <strong>character</strong> on a locally compact abelian group G is a continuous homomorphism to the circle:</p>
      <div class="math-display">
        <strong>Definition:</strong> A <em>character</em> is a continuous function Œ±: G ‚Üí ‚ÑÇ such that:<br><br>
        ‚Ä¢ |Œ±(x)| = 1 for all x ‚àà G<br>
        ‚Ä¢ Œ±(xy) = Œ±(x)Œ±(y) for all x, y ‚àà G
      </div>
      <p>Characters generalize the exponentials e^{iŒæx} from classical Fourier analysis on ‚Ñù.</p>
    </div>
  </section>

  <!-- Character Visualization -->
  <section class="char-section">
    <div class="section-header">
      <h2 class="section-title">Characters on ‚Ñù</h2>
      <p class="section-subtitle">Œ±_Œæ(x) = e^{iŒæx} ‚Äî oscillating at frequency Œæ</p>
    </div>

    <div class="char-container">
      <div class="char-panel">
        <div class="char-canvas-container">
          <canvas id="charCanvas"></canvas>
        </div>

        <div class="char-controls">
          <div class="control-group">
            <span class="control-label">Frequency Œæ</span>
            <div class="slider-container">
              <input type="range" id="xiSlider" min="-5" max="5" step="0.1" value="2">
              <span class="slider-value" id="xiValue">2.0</span>
            </div>
          </div>
        </div>

        <div class="char-info">
          <div class="info-card">
            <p class="info-label">Character Formula</p>
            <p class="info-value" style="color: var(--character-teal);">Œ±_Œæ(x) = e^{iŒæx}</p>
          </div>
          <div class="info-card">
            <p class="info-label">Homomorphism Property</p>
            <p class="info-value" style="color: var(--dual-purple);">Œ±(x+y) = Œ±(x)Œ±(y)</p>
          </div>
        </div>
      </div>
    </div>
  </section>

  <!-- Dual Group -->
  <section class="dual-section">
    <div class="section-header" style="color: var(--ink-light);">
      <h2 class="section-title">The Dual Group G*</h2>
      <p class="section-subtitle" style="color: #9CA3AF;">All characters form a group under pointwise multiplication</p>
    </div>

    <div class="dual-container">
      <div class="dual-panel">
        <div class="theorem-card">
          <h3>Theorem 3.17</h3>
          <p>The character group G* of a locally compact abelian group G is itself a locally compact abelian group.</p>
          <p style="margin-top: 0.5rem;"><em>Multiplication: (Œ±Œ≤)(x) = Œ±(x)Œ≤(x). Identity: 1. Inverse: Œ±* (conjugate).</em></p>
        </div>

        <div class="examples-grid">
          <div class="example-card">
            <p class="group">G = ‚Ñù</p>
            <p class="dual">G* ‚âÖ ‚Ñù</p>
            <p class="char">Œ±_Œæ(x) = e^{iŒæx}</p>
          </div>
          <div class="example-card">
            <p class="group">G = ‚Ñ§</p>
            <p class="dual">G* ‚âÖ ùïã</p>
            <p class="char">Œ±_Œ∏(n) = e^{2œÄinŒ∏}</p>
          </div>
          <div class="example-card">
            <p class="group">G = ùïã</p>
            <p class="dual">G* ‚âÖ ‚Ñ§</p>
            <p class="char">Œ±_n(Œ∏) = e^{inŒ∏}</p>
          </div>
        </div>
      </div>
    </div>
  </section>

  <!-- Homomorphism Correspondence -->
  <section class="homom-section">
    <div class="section-header">
      <h2 class="section-title">Characters & Homomorphisms</h2>
      <p class="section-subtitle">Every bounded nonzero homomorphism L‚ÇÅ(G) ‚Üí ‚ÑÇ comes from a character</p>
    </div>

    <div class="homom-container">
      <div class="homom-panel">
        <div class="homom-theorem">
          <h3>Theorem 3.5</h3>
          <p>If Œª: L‚ÇÅ(G) ‚Üí ‚ÑÇ is any bounded nonzero homomorphism, then there exists a unique Œ± ‚àà G* with:</p>
          <p class="homom-formula">Œ±(f) = Œª(f) for all f ‚àà L‚ÇÅ(G)</p>
          <p style="margin-top: 0.5rem;">where Œ±(f) = ‚à´ f(x)Œ±(x) dŒº(x).</p>
        </div>

        <div class="math-display" style="background: rgba(245, 158, 11, 0.1); border-color: var(--product-amber); margin-top: 1.5rem;">
          <strong>Proposition 3.7:</strong> For each Œ± ‚àà G* and f ‚àà L‚ÇÅ(G):<br><br>
          |Œ±(f)| ‚â§ ‚ÄñT(f)‚Äñ<br><br>
          where T(f) is the convolution operator g ‚Ü¶ f * g on L‚ÇÇ(G).
        </div>
      </div>
    </div>
  </section>

  <!-- Narrative: Topology -->
  <section class="narrative-section dark">
    <div class="narrative-content" data-animate>
      <p>The dual group G* inherits a natural topology from the spectral theorem:</p>
      <div class="math-display">
        <strong>Metric on G*:</strong><br><br>
        œÅ*(Œ±, Œ≤) = |||Œ± - Œ≤||| + |(|||Œ±|||‚Åª¬π - |||Œ≤|||‚Åª¬π)|<br><br>
        where |||Œ±||| = Œ£ 2‚Åª‚Åø|Œ±(f‚Çô)|(1 + ‚ÄñT(f‚Çô)‚Äñ)‚Åª¬π
      </div>
      <p>This makes G* locally compact, with bounded sets characterized by behavior on compact subsets of G.</p>
    </div>
  </section>

  <!-- Navigation -->
  <section class="next-section">
    <p class="next-label">Coming Next</p>
    <h3 class="next-title">Fourier Transform & Pontryagin Duality</h3>
    <p class="next-description">The Fourier transform maps L‚ÇÅ(G) to C‚ÇÄ(G*). Pontryagin duality: G ‚âÖ G**.</p>
  </section>

  <script>
    // Scroll animations
    const observerOptions = { threshold: 0.3, rootMargin: '0px 0px -10% 0px' };
    const observer = new IntersectionObserver((entries) => {
      entries.forEach(entry => {
        if (entry.isIntersecting) entry.target.classList.add('visible');
      });
    }, observerOptions);
    document.querySelectorAll('[data-animate], .narrative-content').forEach(el => observer.observe(el));

    function setupCanvas(canvas) {
      const dpr = window.devicePixelRatio || 1;
      const rect = canvas.getBoundingClientRect();
      canvas.width = rect.width * dpr;
      canvas.height = rect.height * dpr;
      const ctx = canvas.getContext('2d');
      ctx.scale(dpr, dpr);
      return { ctx, width: rect.width, height: rect.height };
    }

    // ============================================
    // CHARACTER VISUALIZATION
    // ============================================
    
    const charCanvas = document.getElementById('charCanvas');
    let xi = 2;

    function drawChar() {
      const { ctx, width, height } = setupCanvas(charCanvas);

      ctx.fillStyle = '#FAFAFA';
      ctx.fillRect(0, 0, width, height);

      const marginX = 50, marginY = 30;
      const plotW = width - 2 * marginX;
      const plotH = height - 2 * marginY;

      // Axes
      ctx.strokeStyle = '#CCC';
      ctx.lineWidth = 2;
      ctx.beginPath();
      ctx.moveTo(marginX, height / 2);
      ctx.lineTo(width - marginX, height / 2);
      ctx.stroke();

      const xRange = [-Math.PI, Math.PI];

      function toPixelX(x) {
        return marginX + (x - xRange[0]) / (xRange[1] - xRange[0]) * plotW;
      }
      function toPixelY(y) {
        return height / 2 - y * (plotH / 2 - 10);
      }

      // Real part: cos(Œæx)
      ctx.strokeStyle = '#3B82F6';
      ctx.lineWidth = 2;
      ctx.beginPath();
      for (let px = 0; px <= plotW; px++) {
        const x = xRange[0] + px / plotW * (xRange[1] - xRange[0]);
        const y = Math.cos(xi * x);
        if (px === 0) ctx.moveTo(toPixelX(x), toPixelY(y));
        else ctx.lineTo(toPixelX(x), toPixelY(y));
      }
      ctx.stroke();

      // Imaginary part: sin(Œæx)
      ctx.strokeStyle = '#14B8A6';
      ctx.lineWidth = 2;
      ctx.beginPath();
      for (let px = 0; px <= plotW; px++) {
        const x = xRange[0] + px / plotW * (xRange[1] - xRange[0]);
        const y = Math.sin(xi * x);
        if (px === 0) ctx.moveTo(toPixelX(x), toPixelY(y));
        else ctx.lineTo(toPixelX(x), toPixelY(y));
      }
      ctx.stroke();

      // Legend
      ctx.font = '12px "JetBrains Mono"';
      ctx.fillStyle = '#3B82F6';
      ctx.textAlign = 'left';
      ctx.fillText('Re(Œ±) = cos(Œæx)', marginX + 10, marginY + 15);

      ctx.fillStyle = '#14B8A6';
      ctx.fillText('Im(Œ±) = sin(Œæx)', marginX + 10, marginY + 35);

      // Axis labels
      ctx.fillStyle = '#666';
      ctx.textAlign = 'center';
      ctx.fillText('-œÄ', toPixelX(-Math.PI), height / 2 + 20);
      ctx.fillText('0', toPixelX(0), height / 2 + 20);
      ctx.fillText('œÄ', toPixelX(Math.PI), height / 2 + 20);

      document.getElementById('xiValue').textContent = xi.toFixed(1);
    }

    document.getElementById('xiSlider').addEventListener('input', (e) => {
      xi = parseFloat(e.target.value);
      drawChar();
    });

    // Initialize
    drawChar();

    window.addEventListener('resize', drawChar);
  </script>
</body>
</html>
