<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Complemented Sets & Inequality — Chapter 3</title>
  <link href="https://fonts.googleapis.com/css2?family=Crimson+Text:ital,wght@0,400;0,600;1,400&family=Source+Sans+Pro:wght@300;400;600&family=JetBrains+Mono:wght@400;500&display=swap" rel="stylesheet">
  <style>
    :root {
      --set-primary: #4F46E5;
      --complement-color: #EC4899;
      --inequality-color: #EF4444;
      --positive-color: #22C55E;
      --negative-color: #6B7280;
      --gap-color: #F59E0B;
      --background: #FAF8F5;
      --background-dark: #0F0F12;
      --ink: #1A1A1A;
      --ink-light: #FAF8F5;
      
      --display: 'Crimson Text', serif;
      --body: 'Source Sans Pro', sans-serif;
      --mono: 'JetBrains Mono', monospace;
      
      --ease-out-expo: cubic-bezier(0.16, 1, 0.3, 1);
    }

    * { margin: 0; padding: 0; box-sizing: border-box; }
    html { scroll-behavior: smooth; }
    body {
      font-family: var(--body);
      background: var(--background);
      color: var(--ink);
      line-height: 1.7;
      overflow-x: hidden;
    }

    /* Opening */
    .opening {
      min-height: 100vh;
      display: flex;
      flex-direction: column;
      justify-content: center;
      align-items: center;
      padding: 2rem;
      background: linear-gradient(180deg, var(--complement-color) 0%, #BE185D 100%);
      color: var(--ink-light);
      position: relative;
    }

    .opening-content {
      text-align: center;
      max-width: 800px;
    }

    .chapter-label {
      font-family: var(--mono);
      font-size: 0.7rem;
      letter-spacing: 0.2em;
      text-transform: uppercase;
      color: rgba(255,255,255,0.7);
      margin-bottom: 0.5rem;
      opacity: 0;
      animation: fadeUp 0.8s var(--ease-out-expo) 0.2s forwards;
    }

    .section-label {
      font-family: var(--mono);
      font-size: 0.7rem;
      letter-spacing: 0.2em;
      text-transform: uppercase;
      color: rgba(255,255,255,0.9);
      margin-bottom: 1rem;
      opacity: 0;
      animation: fadeUp 0.8s var(--ease-out-expo) 0.3s forwards;
    }

    .main-title {
      font-family: var(--display);
      font-size: clamp(2rem, 6vw, 3.5rem);
      font-weight: 400;
      line-height: 1.2;
      margin-bottom: 1.5rem;
      opacity: 0;
      animation: fadeUp 0.8s var(--ease-out-expo) 0.4s forwards;
    }

    .subtitle {
      font-size: 1.15rem;
      color: rgba(255, 255, 255, 0.9);
      max-width: 600px;
      margin: 0 auto;
      opacity: 0;
      animation: fadeUp 0.8s var(--ease-out-expo) 0.6s forwards;
    }

    @keyframes fadeUp {
      from { opacity: 0; transform: translateY(20px); }
      to { opacity: 1; transform: translateY(0); }
    }

    /* Narrative */
    .narrative-section {
      min-height: 60vh;
      display: flex;
      align-items: center;
      justify-content: center;
      padding: 4rem 2rem;
    }

    .narrative-section.dark {
      background: var(--background-dark);
      color: var(--ink-light);
    }

    .narrative-content {
      max-width: 650px;
      opacity: 0;
      transform: translateY(30px);
      transition: opacity 0.8s var(--ease-out-expo), transform 0.8s var(--ease-out-expo);
    }

    .narrative-content.visible {
      opacity: 1;
      transform: translateY(0);
    }

    .narrative-content p {
      font-size: 1.2rem;
      margin-bottom: 1.5rem;
    }

    .math-display {
      font-family: var(--mono);
      font-size: 0.95rem;
      background: rgba(236, 72, 153, 0.1);
      padding: 1.5rem;
      border-radius: 8px;
      text-align: center;
      margin: 1.5rem 0;
      border-left: 3px solid var(--complement-color);
    }

    .dark .math-display {
      background: rgba(236, 72, 153, 0.15);
    }

    /* Section headers */
    .section-header {
      text-align: center;
      margin-bottom: 3rem;
    }

    .section-title {
      font-family: var(--display);
      font-size: 2rem;
      margin-bottom: 0.5rem;
    }

    .section-subtitle {
      color: #666;
      font-size: 1rem;
      max-width: 600px;
      margin: 0 auto;
    }

    /* Inequality Section */
    .inequality-section {
      padding: 4rem 2rem;
      background: linear-gradient(180deg, #F5F3F0 0%, var(--background) 100%);
    }

    .inequality-container {
      max-width: 1000px;
      margin: 0 auto;
    }

    .inequality-panel {
      background: white;
      border-radius: 16px;
      box-shadow: 0 4px 30px rgba(0, 0, 0, 0.08);
      padding: 2rem;
    }

    .axiom-cards {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
      gap: 1.5rem;
      margin-bottom: 2rem;
    }

    .axiom-card {
      background: #FAFAFA;
      border-radius: 12px;
      padding: 1.5rem;
      border-left: 4px solid var(--inequality-color);
      cursor: pointer;
      transition: all 0.3s;
    }

    .axiom-card:hover {
      transform: translateY(-3px);
      box-shadow: 0 8px 25px rgba(0, 0, 0, 0.1);
    }

    .axiom-card.active {
      border-left-color: var(--positive-color);
      background: rgba(34, 197, 94, 0.05);
    }

    .axiom-label {
      font-family: var(--mono);
      font-size: 0.7rem;
      letter-spacing: 0.1em;
      text-transform: uppercase;
      color: var(--inequality-color);
      margin-bottom: 0.5rem;
    }

    .axiom-card.active .axiom-label {
      color: var(--positive-color);
    }

    .axiom-name {
      font-family: var(--display);
      font-size: 1.2rem;
      margin-bottom: 0.5rem;
    }

    .axiom-formula {
      font-family: var(--mono);
      font-size: 0.9rem;
      color: #666;
    }

    .axiom-canvas-container {
      height: 280px;
      background: #FAFAFA;
      border-radius: 12px;
    }

    #axiomCanvas {
      width: 100%;
      height: 100%;
    }

    /* Complemented Sets Section */
    .complemented-section {
      min-height: 100vh;
      padding: 4rem 2rem;
      background: var(--background-dark);
      color: var(--ink-light);
    }

    .complemented-container {
      max-width: 1000px;
      margin: 0 auto;
    }

    .complemented-panel {
      background: rgba(30, 30, 40, 0.5);
      border: 1px solid rgba(107, 114, 128, 0.3);
      border-radius: 16px;
      padding: 2rem;
    }

    .complemented-canvas-container {
      height: 320px;
      margin-bottom: 1.5rem;
    }

    #complementedCanvas {
      width: 100%;
      height: 100%;
      border-radius: 8px;
      background: #0A0A0F;
    }

    .complemented-controls {
      display: flex;
      justify-content: center;
      gap: 1rem;
      margin-bottom: 1.5rem;
      flex-wrap: wrap;
    }

    .comp-btn {
      padding: 0.8rem 1.2rem;
      border: 2px solid var(--complement-color);
      border-radius: 8px;
      background: transparent;
      color: var(--complement-color);
      font-family: var(--mono);
      font-size: 0.85rem;
      cursor: pointer;
      transition: all 0.2s;
    }

    .comp-btn:hover {
      background: rgba(236, 72, 153, 0.2);
    }

    .comp-btn.active {
      background: var(--complement-color);
      color: white;
    }

    .complemented-info {
      display: grid;
      grid-template-columns: repeat(3, 1fr);
      gap: 1rem;
    }

    @media (max-width: 700px) {
      .complemented-info { grid-template-columns: 1fr; }
    }

    .info-card {
      background: rgba(20, 20, 30, 0.5);
      padding: 1.2rem;
      border-radius: 10px;
      text-align: center;
    }

    .info-label {
      font-family: var(--mono);
      font-size: 0.65rem;
      letter-spacing: 0.1em;
      text-transform: uppercase;
      color: var(--negative-color);
      margin-bottom: 0.3rem;
    }

    .info-value {
      font-family: var(--mono);
      font-size: 0.95rem;
    }

    /* Distributive Law Failure */
    .distributive-section {
      padding: 4rem 2rem;
      background: var(--background);
    }

    .distributive-container {
      max-width: 900px;
      margin: 0 auto;
    }

    .distributive-panel {
      background: white;
      border-radius: 16px;
      box-shadow: 0 4px 30px rgba(0, 0, 0, 0.08);
      padding: 2rem;
    }

    .law-comparison {
      display: grid;
      grid-template-columns: 1fr 1fr;
      gap: 2rem;
      margin-bottom: 2rem;
    }

    @media (max-width: 700px) {
      .law-comparison { grid-template-columns: 1fr; }
    }

    .law-card {
      padding: 1.5rem;
      border-radius: 12px;
      text-align: center;
    }

    .law-card.valid {
      background: rgba(34, 197, 94, 0.1);
      border: 2px solid var(--positive-color);
    }

    .law-card.invalid {
      background: rgba(239, 68, 68, 0.1);
      border: 2px solid var(--inequality-color);
    }

    .law-status {
      font-family: var(--mono);
      font-size: 0.7rem;
      letter-spacing: 0.1em;
      text-transform: uppercase;
      margin-bottom: 0.5rem;
    }

    .law-card.valid .law-status { color: var(--positive-color); }
    .law-card.invalid .law-status { color: var(--inequality-color); }

    .law-formula {
      font-family: var(--mono);
      font-size: 0.9rem;
      margin-bottom: 0.5rem;
    }

    .law-name {
      font-size: 0.85rem;
      color: #666;
    }

    .counterexample {
      background: #FAFAFA;
      border-radius: 12px;
      padding: 1.5rem;
      border-left: 4px solid var(--inequality-color);
    }

    .counterexample-title {
      font-family: var(--mono);
      font-size: 0.75rem;
      letter-spacing: 0.1em;
      text-transform: uppercase;
      color: var(--inequality-color);
      margin-bottom: 1rem;
    }

    .counterexample p {
      font-size: 0.95rem;
      margin-bottom: 0.8rem;
    }

    .counterexample code {
      font-family: var(--mono);
      background: rgba(239, 68, 68, 0.1);
      padding: 0.2rem 0.4rem;
      border-radius: 4px;
    }

    /* Navigation */
    .next-section {
      padding: 4rem 2rem;
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: center;
      background: linear-gradient(180deg, var(--complement-color) 0%, #BE185D 100%);
      color: var(--ink-light);
      text-align: center;
    }

    .next-label {
      font-family: var(--mono);
      font-size: 0.7rem;
      letter-spacing: 0.2em;
      text-transform: uppercase;
      color: rgba(255,255,255,0.7);
      margin-bottom: 1rem;
    }

    .next-title {
      font-family: var(--display);
      font-size: 1.6rem;
      margin-bottom: 0.5rem;
    }

    .next-description {
      font-size: 1rem;
      color: rgba(255, 255, 255, 0.9);
      max-width: 500px;
    }
  </style>
</head>
<body>

  <!-- Opening -->
  <section class="opening">
    <div class="opening-content">
      <p class="chapter-label">Chapter 3: Set Theory</p>
      <p class="section-label">Section 2: Complemented Sets</p>
      <h1 class="main-title">Complemented Sets & Inequality</h1>
      <p class="subtitle">Before we can take complements, we need a notion of "definitely different." Negation won't suffice—we need inequality.</p>
    </div>
  </section>

  <!-- Narrative: The Problem -->
  <section class="narrative-section">
    <div class="narrative-content" data-animate>
      <p>What is the complement of a set A? Classically, it's everything not in A. But "not in A" is a negative statement—it doesn't construct anything.</p>
      <p>If we can't decide membership, we can't decide non-membership either. The complement becomes a fog.</p>
    </div>
  </section>

  <!-- Narrative: The Solution -->
  <section class="narrative-section">
    <div class="narrative-content" data-animate>
      <div class="math-display">
        <strong>Definition 2.1:</strong> An inequality ≠ on X satisfies:<br><br>
        (a) x = y and x ≠ y implies 0 = 1 &nbsp;<em>(consistency)</em><br>
        (b) x ≠ y implies y ≠ x &nbsp;<em>(symmetry)</em><br>
        (c) x ≠ y implies x ≠ z or y ≠ z &nbsp;<em>(cotransitivity)</em>
      </div>
      <p>Cotransitivity is the surprising one. If x and y are different, then for <em>any</em> z, either x differs from z or y differs from z. Difference propagates.</p>
    </div>
  </section>

  <!-- Inequality Axioms -->
  <section class="inequality-section">
    <div class="section-header">
      <h2 class="section-title">The Three Axioms of Inequality</h2>
      <p class="section-subtitle">Click each axiom to see it visualized</p>
    </div>

    <div class="inequality-container">
      <div class="inequality-panel">
        <div class="axiom-cards">
          <div class="axiom-card active" data-axiom="consistency">
            <p class="axiom-label">Axiom (a)</p>
            <h3 class="axiom-name">Consistency</h3>
            <p class="axiom-formula">x = y ∧ x ≠ y ⟹ 0 = 1</p>
          </div>

          <div class="axiom-card" data-axiom="symmetry">
            <p class="axiom-label">Axiom (b)</p>
            <h3 class="axiom-name">Symmetry</h3>
            <p class="axiom-formula">x ≠ y ⟹ y ≠ x</p>
          </div>

          <div class="axiom-card" data-axiom="cotransitivity">
            <p class="axiom-label">Axiom (c)</p>
            <h3 class="axiom-name">Cotransitivity</h3>
            <p class="axiom-formula">x ≠ y ⟹ (x ≠ z ∨ y ≠ z)</p>
          </div>
        </div>

        <div class="axiom-canvas-container">
          <canvas id="axiomCanvas"></canvas>
        </div>
      </div>
    </div>
  </section>

  <!-- Complemented Sets -->
  <section class="complemented-section">
    <div class="section-header" style="color: var(--ink-light);">
      <h2 class="section-title">Complemented Sets</h2>
      <p class="section-subtitle" style="color: var(--negative-color);">A complemented set is a pair (A¹, A⁰) with a gap between them</p>
    </div>

    <div class="complemented-container">
      <div class="complemented-panel">
        <div class="complemented-canvas-container">
          <canvas id="complementedCanvas"></canvas>
        </div>

        <div class="complemented-controls">
          <button class="comp-btn active" data-set="positive">ℝ⁺ vs ℝ⁻</button>
          <button class="comp-btn" data-set="rational">ℚ vs Irrational</button>
          <button class="comp-btn" data-set="custom">Custom</button>
        </div>

        <div class="complemented-info">
          <div class="info-card">
            <p class="info-label">A¹ (Positive Part)</p>
            <p class="info-value" id="a1Desc" style="color: var(--positive-color);">x > 0</p>
          </div>
          <div class="info-card">
            <p class="info-label">The Gap</p>
            <p class="info-value" id="gapDesc" style="color: var(--gap-color);">x = 0 or undecidable</p>
          </div>
          <div class="info-card">
            <p class="info-label">A⁰ (Negative Part)</p>
            <p class="info-value" id="a0Desc" style="color: var(--complement-color);">x < 0</p>
          </div>
        </div>
      </div>
    </div>
  </section>

  <!-- Distributive Law Failure -->
  <section class="distributive-section">
    <div class="section-header">
      <h2 class="section-title">The Distributive Law Fails</h2>
      <p class="section-subtitle">Not all classical set-theoretic laws survive constructively</p>
    </div>

    <div class="distributive-container">
      <div class="distributive-panel">
        <div class="law-comparison">
          <div class="law-card valid">
            <p class="law-status">✓ Valid</p>
            <p class="law-formula">U ∨ (V ∧ W) = (U ∨ V) ∧ (U ∨ W)</p>
            <p class="law-name">Finite Distributive Law</p>
          </div>

          <div class="law-card invalid">
            <p class="law-status">✗ Fails</p>
            <p class="law-formula">U ∨ ⋀Uₙ = ⋀(U ∨ Uₙ)</p>
            <p class="law-name">Infinite Distributive Law</p>
          </div>
        </div>

        <div class="counterexample">
          <p class="counterexample-title">Counterexample</p>
          <p>Let <code>(nₖ)</code> be a sequence where each nₖ is 0 or 1, but we don't know which.</p>
          <p>Define <code>Uₖ = (ℝ, ∅)</code> if nₖ = 1, and <code>Uₖ = (∅, ℝ)</code> if nₖ = 0.</p>
          <p>Let <code>U = ⋁(-Uₖ)</code>.</p>
          <p><strong>Right side:</strong> Each <code>U ∨ Uₖ = (ℝ, ∅)</code>, so <code>⋀(U ∨ Uₖ) = (ℝ, ∅)</code>.</p>
          <p><strong>Left side:</strong> We cannot construct any element of <code>U ∨ ⋀Uₖ</code> without knowing the sequence.</p>
          <p>The two sides are not equal!</p>
        </div>
      </div>
    </div>
  </section>

  <!-- Narrative: Tight Inequality -->
  <section class="narrative-section dark">
    <div class="narrative-content" data-animate>
      <p>The standard inequality on ℝ is <strong>tight</strong>: if assuming x ≠ y leads to contradiction, then x = y.</p>
      <div class="math-display">
        x ≠ y is tight if: (x ≠ y ⟹ 0 = 1) ⟹ x = y
      </div>
      <p>This is a strong property. It means the inequality captures all the "apartness" information—there's no gap between "provably equal" and "not provably unequal."</p>
    </div>
  </section>

  <!-- Navigation -->
  <section class="next-section">
    <p class="next-label">Chapter 3 Complete</p>
    <h3 class="next-title">Sets Are Dynamic</h3>
    <p class="next-description">Set theory in constructive mathematics is not about static collections, but about construction protocols and explicit witnessing.</p>
  </section>

  <script>
    // Scroll animations
    const observerOptions = { threshold: 0.3, rootMargin: '0px 0px -10% 0px' };
    const observer = new IntersectionObserver((entries) => {
      entries.forEach(entry => {
        if (entry.isIntersecting) entry.target.classList.add('visible');
      });
    }, observerOptions);
    document.querySelectorAll('[data-animate], .narrative-content').forEach(el => observer.observe(el));

    function setupCanvas(canvas) {
      const dpr = window.devicePixelRatio || 1;
      const rect = canvas.getBoundingClientRect();
      canvas.width = rect.width * dpr;
      canvas.height = rect.height * dpr;
      const ctx = canvas.getContext('2d');
      ctx.scale(dpr, dpr);
      return { ctx, width: rect.width, height: rect.height };
    }

    // ============================================
    // INEQUALITY AXIOMS VISUALIZATION
    // ============================================
    
    const axiomCanvas = document.getElementById('axiomCanvas');
    let currentAxiom = 'consistency';

    function drawAxiom() {
      const { ctx, width, height } = setupCanvas(axiomCanvas);

      ctx.fillStyle = '#FAFAFA';
      ctx.fillRect(0, 0, width, height);

      const centerX = width / 2;
      const centerY = height / 2;

      if (currentAxiom === 'consistency') {
        // Show x = y and x ≠ y leading to contradiction
        ctx.font = '16px "JetBrains Mono"';
        ctx.textAlign = 'center';
        
        // Draw x and y as same point
        ctx.fillStyle = '#4F46E5';
        ctx.beginPath();
        ctx.arc(centerX, centerY - 30, 20, 0, Math.PI * 2);
        ctx.fill();
        
        ctx.fillStyle = '#1A1A1A';
        ctx.fillText('x = y', centerX, centerY - 25);

        // But also x ≠ y?
        ctx.strokeStyle = '#EF4444';
        ctx.lineWidth = 3;
        ctx.setLineDash([5, 5]);
        ctx.beginPath();
        ctx.moveTo(centerX - 40, centerY - 30);
        ctx.lineTo(centerX + 40, centerY - 30);
        ctx.stroke();
        ctx.setLineDash([]);

        ctx.fillStyle = '#EF4444';
        ctx.fillText('x ≠ y ?', centerX, centerY + 20);

        // Contradiction symbol
        ctx.font = 'bold 24px "JetBrains Mono"';
        ctx.fillStyle = '#EF4444';
        ctx.fillText('⊥', centerX, centerY + 70);
        ctx.font = '12px "JetBrains Mono"';
        ctx.fillText('Contradiction!', centerX, centerY + 95);

      } else if (currentAxiom === 'symmetry') {
        // Show x ≠ y implies y ≠ x
        const x1 = centerX - 80;
        const x2 = centerX + 80;

        // Draw x
        ctx.fillStyle = '#4F46E5';
        ctx.beginPath();
        ctx.arc(x1, centerY, 15, 0, Math.PI * 2);
        ctx.fill();
        ctx.fillStyle = '#1A1A1A';
        ctx.font = '14px "JetBrains Mono"';
        ctx.textAlign = 'center';
        ctx.fillText('x', x1, centerY + 5);

        // Draw y
        ctx.fillStyle = '#EC4899';
        ctx.beginPath();
        ctx.arc(x2, centerY, 15, 0, Math.PI * 2);
        ctx.fill();
        ctx.fillStyle = '#1A1A1A';
        ctx.fillText('y', x2, centerY + 5);

        // Arrow from x to y (x ≠ y)
        ctx.strokeStyle = '#EF4444';
        ctx.lineWidth = 2;
        ctx.beginPath();
        ctx.moveTo(x1 + 20, centerY - 15);
        ctx.lineTo(x2 - 20, centerY - 15);
        ctx.stroke();
        // Arrow head
        ctx.beginPath();
        ctx.moveTo(x2 - 20, centerY - 15);
        ctx.lineTo(x2 - 30, centerY - 20);
        ctx.moveTo(x2 - 20, centerY - 15);
        ctx.lineTo(x2 - 30, centerY - 10);
        ctx.stroke();

        ctx.fillStyle = '#EF4444';
        ctx.font = '12px "JetBrains Mono"';
        ctx.fillText('x ≠ y', centerX, centerY - 25);

        // Arrow from y to x (y ≠ x)
        ctx.beginPath();
        ctx.moveTo(x2 - 20, centerY + 15);
        ctx.lineTo(x1 + 20, centerY + 15);
        ctx.stroke();
        ctx.beginPath();
        ctx.moveTo(x1 + 20, centerY + 15);
        ctx.lineTo(x1 + 30, centerY + 10);
        ctx.moveTo(x1 + 20, centerY + 15);
        ctx.lineTo(x1 + 30, centerY + 20);
        ctx.stroke();

        ctx.fillText('y ≠ x', centerX, centerY + 35);

        ctx.fillStyle = '#22C55E';
        ctx.font = '11px "JetBrains Mono"';
        ctx.fillText('Inequality is symmetric', centerX, centerY + 70);

      } else if (currentAxiom === 'cotransitivity') {
        // Show x ≠ y implies x ≠ z or y ≠ z
        const x1 = centerX - 100;
        const x2 = centerX + 100;
        const x3 = centerX;
        const y3 = centerY + 60;

        // Draw x
        ctx.fillStyle = '#4F46E5';
        ctx.beginPath();
        ctx.arc(x1, centerY - 30, 15, 0, Math.PI * 2);
        ctx.fill();
        ctx.fillStyle = '#1A1A1A';
        ctx.font = '14px "JetBrains Mono"';
        ctx.textAlign = 'center';
        ctx.fillText('x', x1, centerY - 25);

        // Draw y
        ctx.fillStyle = '#EC4899';
        ctx.beginPath();
        ctx.arc(x2, centerY - 30, 15, 0, Math.PI * 2);
        ctx.fill();
        ctx.fillStyle = '#1A1A1A';
        ctx.fillText('y', x2, centerY - 25);

        // Draw z
        ctx.fillStyle = '#F59E0B';
        ctx.beginPath();
        ctx.arc(x3, y3, 15, 0, Math.PI * 2);
        ctx.fill();
        ctx.fillStyle = '#1A1A1A';
        ctx.fillText('z', x3, y3 + 5);

        // x ≠ y line
        ctx.strokeStyle = '#EF4444';
        ctx.lineWidth = 3;
        ctx.beginPath();
        ctx.moveTo(x1 + 20, centerY - 30);
        ctx.lineTo(x2 - 20, centerY - 30);
        ctx.stroke();
        ctx.fillStyle = '#EF4444';
        ctx.font = '11px "JetBrains Mono"';
        ctx.fillText('x ≠ y', centerX, centerY - 50);

        // Dashed lines to z (at least one must be ≠)
        ctx.setLineDash([4, 4]);
        ctx.strokeStyle = 'rgba(239, 68, 68, 0.5)';
        ctx.lineWidth = 2;
        
        // x to z
        ctx.beginPath();
        ctx.moveTo(x1 + 10, centerY - 15);
        ctx.lineTo(x3 - 10, y3 - 10);
        ctx.stroke();

        // y to z
        ctx.beginPath();
        ctx.moveTo(x2 - 10, centerY - 15);
        ctx.lineTo(x3 + 10, y3 - 10);
        ctx.stroke();
        ctx.setLineDash([]);

        ctx.fillStyle = '#F59E0B';
        ctx.font = '10px "JetBrains Mono"';
        ctx.fillText('x ≠ z', x1 + 30, centerY + 20);
        ctx.fillText('y ≠ z', x2 - 30, centerY + 20);

        ctx.fillStyle = '#22C55E';
        ctx.font = '11px "JetBrains Mono"';
        ctx.fillText('At least ONE must hold!', centerX, y3 + 50);
      }
    }

    document.querySelectorAll('.axiom-card').forEach(card => {
      card.addEventListener('click', () => {
        document.querySelectorAll('.axiom-card').forEach(c => c.classList.remove('active'));
        card.classList.add('active');
        currentAxiom = card.dataset.axiom;
        drawAxiom();
      });
    });

    // ============================================
    // COMPLEMENTED SETS VISUALIZATION
    // ============================================
    
    const complementedCanvas = document.getElementById('complementedCanvas');
    let currentSet = 'positive';

    const setData = {
      positive: {
        a1: 'x > 0',
        gap: 'x = 0 or undecidable',
        a0: 'x < 0',
        a1Color: '#22C55E',
        a0Color: '#EC4899'
      },
      rational: {
        a1: 'x ∈ ℚ (provably rational)',
        gap: 'Unknown rationality',
        a0: 'x ∉ ℚ (provably irrational)',
        a1Color: '#4F46E5',
        a0Color: '#F97316'
      },
      custom: {
        a1: 'Elements with witness',
        gap: 'Undetermined elements',
        a0: 'Elements with counter-witness',
        a1Color: '#06B6D4',
        a0Color: '#8B5CF6'
      }
    };

    function drawComplemented() {
      const { ctx, width, height } = setupCanvas(complementedCanvas);
      const data = setData[currentSet];

      ctx.fillStyle = '#0A0A0F';
      ctx.fillRect(0, 0, width, height);

      const margin = 40;
      const barHeight = 60;
      const barY = height / 2 - barHeight / 2;

      // A¹ region (left)
      const a1Width = (width - 2 * margin) * 0.35;
      ctx.fillStyle = data.a1Color;
      ctx.globalAlpha = 0.3;
      ctx.fillRect(margin, barY, a1Width, barHeight);
      ctx.globalAlpha = 1;
      ctx.strokeStyle = data.a1Color;
      ctx.lineWidth = 2;
      ctx.strokeRect(margin, barY, a1Width, barHeight);

      // Gap region (middle)
      const gapStart = margin + a1Width;
      const gapWidth = (width - 2 * margin) * 0.3;
      ctx.fillStyle = '#F59E0B';
      ctx.globalAlpha = 0.15;
      ctx.fillRect(gapStart, barY, gapWidth, barHeight);
      ctx.globalAlpha = 1;
      ctx.strokeStyle = '#F59E0B';
      ctx.setLineDash([5, 5]);
      ctx.strokeRect(gapStart, barY, gapWidth, barHeight);
      ctx.setLineDash([]);

      // A⁰ region (right)
      const a0Start = gapStart + gapWidth;
      const a0Width = (width - 2 * margin) * 0.35;
      ctx.fillStyle = data.a0Color;
      ctx.globalAlpha = 0.3;
      ctx.fillRect(a0Start, barY, a0Width, barHeight);
      ctx.globalAlpha = 1;
      ctx.strokeStyle = data.a0Color;
      ctx.lineWidth = 2;
      ctx.strokeRect(a0Start, barY, a0Width, barHeight);

      // Labels
      ctx.font = 'bold 14px "JetBrains Mono"';
      ctx.textAlign = 'center';
      
      ctx.fillStyle = data.a1Color;
      ctx.fillText('A¹', margin + a1Width / 2, barY - 15);
      
      ctx.fillStyle = '#F59E0B';
      ctx.fillText('Gap', gapStart + gapWidth / 2, barY - 15);
      
      ctx.fillStyle = data.a0Color;
      ctx.fillText('A⁰', a0Start + a0Width / 2, barY - 15);

      // Characteristic function visualization
      ctx.font = '11px "JetBrains Mono"';
      ctx.fillStyle = data.a1Color;
      ctx.fillText('χ(x) = 1', margin + a1Width / 2, barY + barHeight / 2 + 5);
      
      ctx.fillStyle = '#F59E0B';
      ctx.fillText('χ undefined', gapStart + gapWidth / 2, barY + barHeight / 2 + 5);
      
      ctx.fillStyle = data.a0Color;
      ctx.fillText('χ(x) = 0', a0Start + a0Width / 2, barY + barHeight / 2 + 5);

      // Bottom explanation
      ctx.fillStyle = '#9CA3AF';
      ctx.font = '12px "JetBrains Mono"';
      ctx.fillText('x ≠ y whenever x ∈ A¹ and y ∈ A⁰', width / 2, barY + barHeight + 40);

      // Update info cards
      document.getElementById('a1Desc').textContent = data.a1;
      document.getElementById('a1Desc').style.color = data.a1Color;
      document.getElementById('gapDesc').textContent = data.gap;
      document.getElementById('a0Desc').textContent = data.a0;
      document.getElementById('a0Desc').style.color = data.a0Color;
    }

    document.querySelectorAll('.comp-btn').forEach(btn => {
      btn.addEventListener('click', () => {
        document.querySelectorAll('.comp-btn').forEach(b => b.classList.remove('active'));
        btn.classList.add('active');
        currentSet = btn.dataset.set;
        drawComplemented();
      });
    });

    // Initialize
    drawAxiom();
    drawComplemented();

    window.addEventListener('resize', () => {
      drawAxiom();
      drawComplemented();
    });
  </script>
</body>
</html>
