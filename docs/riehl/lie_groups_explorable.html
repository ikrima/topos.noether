<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Lie Groups: An Explorable Explanation</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            font-family: 'Palatino', 'Georgia', serif;
            background: #faf8f5;
            color: #2c2416;
            line-height: 1.6;
            overflow-x: hidden;
        }
        
        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 40px 20px;
        }
        
        h1 {
            font-size: 2.5em;
            margin-bottom: 0.3em;
            color: #1a1410;
        }
        
        h2 {
            font-size: 1.8em;
            margin-top: 1.5em;
            margin-bottom: 0.5em;
            color: #1a1410;
        }
        
        p {
            margin-bottom: 1em;
            font-size: 1.1em;
        }
        
        .explorable {
            background: white;
            border-radius: 8px;
            padding: 30px;
            margin: 30px 0;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
        }
        
        canvas {
            display: block;
            margin: 20px auto;
            border-radius: 4px;
            cursor: grab;
        }
        
        canvas:active {
            cursor: grabbing;
        }
        
        .controls {
            display: flex;
            flex-direction: column;
            gap: 20px;
            margin-top: 20px;
        }
        
        .slider-group {
            display: flex;
            align-items: center;
            gap: 15px;
        }
        
        .slider-group label {
            min-width: 120px;
            font-weight: 600;
            color: #444;
        }
        
        input[type="range"] {
            flex: 1;
            height: 6px;
            background: #ddd;
            border-radius: 3px;
            outline: none;
            -webkit-appearance: none;
        }
        
        input[type="range"]::-webkit-slider-thumb {
            -webkit-appearance: none;
            appearance: none;
            width: 20px;
            height: 20px;
            background: #e74c3c;
            border-radius: 50%;
            cursor: pointer;
            transition: transform 0.1s;
        }
        
        input[type="range"]::-webkit-slider-thumb:hover {
            transform: scale(1.2);
        }
        
        input[type="range"]::-moz-range-thumb {
            width: 20px;
            height: 20px;
            background: #e74c3c;
            border-radius: 50%;
            cursor: pointer;
            border: none;
        }
        
        .value-display {
            min-width: 60px;
            text-align: right;
            font-family: 'Monaco', 'Courier New', monospace;
            color: #e74c3c;
            font-weight: bold;
        }
        
        .insight-box {
            background: #fff9e6;
            border-left: 4px solid #f39c12;
            padding: 20px;
            margin: 20px 0;
            border-radius: 4px;
        }
        
        .insight-box strong {
            color: #d68910;
        }
        
        .button-group {
            display: flex;
            gap: 10px;
            margin-top: 15px;
        }
        
        button {
            padding: 10px 20px;
            background: #3498db;
            color: white;
            border: none;
            border-radius: 4px;
            cursor: pointer;
            font-size: 1em;
            transition: background 0.2s;
        }
        
        button:hover {
            background: #2980b9;
        }
        
        button:active {
            transform: translateY(1px);
        }
        
        .visualization-title {
            font-size: 1.3em;
            font-weight: 600;
            margin-bottom: 15px;
            color: #2c3e50;
        }
        
        .caption {
            font-size: 0.95em;
            color: #666;
            font-style: italic;
            text-align: center;
            margin-top: 10px;
        }
        
        .highlight {
            background: #ffe6e6;
            padding: 2px 6px;
            border-radius: 3px;
            font-weight: 600;
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>Lie Groups: The Shape of Symmetry</h1>
        <p style="font-size: 1.2em; color: #666; margin-bottom: 2em;">An explorable explanation by Bret Victor</p>
        
        <p>We need to talk about how mathematics is taught. You're handed equations and told they represent something beautiful, but you never get to <em>see</em> it. You're expected to imagine rotating shapes, visualizing circles, understanding manifolds â€” all in your head.</p>
        
        <p>That's absurd. Here's the thing: <strong>continuous symmetries have geometric shape</strong>. And if they have shape, you should be able to see that shape, touch it, play with it.</p>
        
        <h2>Part 1: Discrete vs. Continuous</h2>
        
        <p>The article talks about the symmetries of a triangle â€” six distinct moves. But a circle? Rotate it any amount, and it looks the same. <span class="highlight">Infinitely many symmetries</span>.</p>
        
        <div class="explorable">
            <div class="visualization-title">Exploration 1: Feel the Difference</div>
            <canvas id="discreteVsContinuous" width="800" height="400"></canvas>
            <div class="controls">
                <div class="slider-group">
                    <label>Triangle Rotation:</label>
                    <input type="range" id="triangleRotation" min="0" max="6" step="1" value="0">
                    <span class="value-display" id="triangleValue">0Â°</span>
                </div>
                <div class="slider-group">
                    <label>Circle Rotation:</label>
                    <input type="range" id="circleRotation" min="0" max="360" step="0.1" value="0">
                    <span class="value-display" id="circleValue">0.0Â°</span>
                </div>
            </div>
            <p class="caption">Try rotating each shape. Notice how the triangle can only exist in six distinct states, but the circle flows continuously through infinite configurations.</p>
        </div>
        
        <div class="insight-box">
            <strong>Key Insight:</strong> The circle's rotations form a <em>continuous group</em> â€” SO(2). Every possible rotation is a point on a circle in mathematical space. The triangle's symmetries are discrete â€” isolated points with gaps between them.
        </div>
        
        <h2>Part 2: Rotations ARE Points on a Circle</h2>
        
        <p>Here's where it gets beautiful. Every rotation of the Frisbee (or circle) can be represented as a single point. Plot all possible rotations, and you get... a circle. <strong>The group of rotations IS geometrically a circle</strong>.</p>
        
        <div class="explorable">
            <div class="visualization-title">Exploration 2: The Group Manifold</div>
            <canvas id="manifoldView" width="800" height="500"></canvas>
            <div class="controls">
                <div class="slider-group">
                    <label>Rotation Angle:</label>
                    <input type="range" id="rotationAngle" min="0" max="360" step="0.5" value="45">
                    <span class="value-display" id="angleValue">45.0Â°</span>
                </div>
                <div class="button-group">
                    <button id="animateRotation">Animate Full Rotation</button>
                    <button id="showAllPoints">Show All Rotation Points</button>
                </div>
            </div>
            <p class="caption">As you rotate the object (left), watch the corresponding point trace a circle in group space (right). Each rotation angle maps to exactly one point on the circle.</p>
        </div>
        
        <div class="insight-box">
            <strong>The Core Revelation:</strong> SO(2) isn't just abstractly "like" a circle â€” it <em>is</em> a circle. This is what makes it a Lie group: it's simultaneously an algebraic structure (group) and a geometric shape (manifold).
        </div>
        
        <h2>Part 3: The Tangent Space (Lie Algebra)</h2>
        
        <p>Now for the magic trick that makes Lie groups so powerful. If you zoom in close enough to any point on the circle, it looks straight. That straight line is called the <span class="highlight">tangent space</span>, or Lie algebra. And here's why this matters: <strong>math on straight lines is vastly easier than math on curves</strong>.</p>
        
        <div class="explorable">
            <div class="visualization-title">Exploration 3: Zoom Into Flatness</div>
            <canvas id="tangentSpace" width="800" height="500"></canvas>
            <div class="controls">
                <div class="slider-group">
                    <label>Zoom Level:</label>
                    <input type="range" id="zoomLevel" min="1" max="100" step="0.1" value="1">
                    <span class="value-display" id="zoomValue">1.0Ã—</span>
                </div>
                <div class="slider-group">
                    <label>Point on Circle:</label>
                    <input type="range" id="circlePoint" min="0" max="360" step="1" value="45">
                    <span class="value-display" id="pointValue">45Â°</span>
                </div>
            </div>
            <p class="caption">Zoom in on any point. Watch the curve disappear. At high zoom, the circle becomes indistinguishable from its tangent line â€” the Lie algebra. This is where linear algebra enters.</p>
        </div>
        
        <div class="insight-box">
            <strong>Why This Matters:</strong> When you zoom in, small rotations become approximately linear. Instead of dealing with circular trigonometry, you can use simple linear algebra. The tangent space (vectors) is infinitely easier to work with than the curved group manifold.
        </div>
        
        <h2>Part 4: Infinitesimal Generators</h2>
        
        <p>In the Lie algebra, we represent rotations as <em>vectors</em> â€” arrows pointing along the tangent line. These vectors are called <span class="highlight">infinitesimal generators</span> because they generate rotations when you "flow" along them. A longer arrow means a faster rotation rate.</p>
        
        <div class="explorable">
            <div class="visualization-title">Exploration 4: From Algebra to Group</div>
            <canvas id="algebraToGroup" width="800" height="500"></canvas>
            <div class="controls">
                <div class="slider-group">
                    <label>Generator Length:</label>
                    <input type="range" id="generatorLength" min="0" max="3" step="0.01" value="0.5">
                    <span class="value-display" id="generatorValue">0.50</span>
                </div>
                <div class="slider-group">
                    <label>Flow Time:</label>
                    <input type="range" id="flowTime" min="0" max="6.28" step="0.01" value="0">
                    <span class="value-display" id="timeValue">0.00</span>
                </div>
                <div class="button-group">
                    <button id="animateFlow">Animate Flow</button>
                </div>
            </div>
            <p class="caption">Start with a vector in the Lie algebra (tangent space). As you increase the flow time, watch it "exponentiate" into rotations on the group manifold. The exponential map connects algebra to group.</p>
        </div>
        
        <p>This is the <strong>exponential map</strong>: it takes vectors in the Lie algebra and "exponentiates" them into elements of the Lie group. It's literally called exp() in the mathematics. Small vectors become small rotations. Longer vectors become larger rotations. Flow along a vector for time <em>t</em>, and you trace out a path on the circle.</p>
        
        <h2>Why This Changes Everything</h2>
        
        <p>Here's what you've discovered by playing with these tools:</p>
        
        <p><strong>1. Continuous symmetries have geometric shape.</strong> SO(2) is a circle. SO(3) (rotations in 3D space) is more complex, but still geometric.</p>
        
        <p><strong>2. Zooming in linearizes the problem.</strong> The curved manifold becomes flat, letting you use linear algebra.</p>
        
        <p><strong>3. Algebra and geometry are connected.</strong> The exponential map bridges them â€” vectors in the tangent space become points on the manifold.</p>
        
        <p><strong>4. This applies to all of physics.</strong> Every fundamental force is defined by a Lie group symmetry. Electromagnetism, gravity, nuclear forces â€” all of them. When Emmy Noether proved that symmetries correspond to conservation laws, she was talking about these continuous symmetries, these Lie groups.</p>
        
        <div class="insight-box">
            <strong>The Deep Truth:</strong> Mathematics isn't just about manipulation of symbols. It's about structures that have shape, relationships you can see, transformations you can touch. Lie groups are powerful not because of their equations, but because they let us see the geometric structure underlying symmetry itself.
        </div>
        
        <h2>Going Further</h2>
        
        <p>What you've explored here is SO(2) â€” the simplest Lie group. But the principles extend to higher dimensions:</p>
        
        <p><strong>SO(3)</strong> â€” rotations of a sphere in 3D space. The manifold is more complex (it's actually topologically weird â€” you need to rotate 720Â° to get back to where you started!).</p>
        
        <p><strong>SU(2)</strong> â€” the group of 2Ã—2 unitary matrices. Its manifold is a 3-sphere. This describes electron spin and is fundamental to quantum mechanics.</p>
        
        <p><strong>SU(3)</strong> â€” describes the strong nuclear force. Its Lie algebra has eight generators (eight types of "gluons" in physics).</p>
        
        <p>In every case, the same principle applies: the group has geometric shape, you can zoom in to get a flat tangent space, and the exponential map connects them. Linear algebra becomes your tool for understanding curved symmetry.</p>
        
        <p style="margin-top: 3em; font-style: italic;">The tools you've used here aren't just illustrations â€” they're instruments for thought. Mathematics should be seen and felt, not just read. When you can manipulate the parameters and immediately see the consequences, when you can zoom in and watch a curve become a line, when you can flow along a vector and trace out a path... that's when understanding happens.</p>
    </div>

    <script>
        // Discrete vs Continuous
        const canvas1 = document.getElementById('discreteVsContinuous');
        const ctx1 = canvas1.getContext('2d');
        
        function drawDiscreteVsContinuous() {
            ctx1.clearRect(0, 0, canvas1.width, canvas1.height);
            
            const triangleAngle = parseInt(document.getElementById('triangleRotation').value) * 60;
            const circleAngle = parseFloat(document.getElementById('circleRotation').value);
            
            document.getElementById('triangleValue').textContent = triangleAngle + 'Â°';
            document.getElementById('circleValue').textContent = circleAngle.toFixed(1) + 'Â°';
            
            // Draw triangle
            ctx1.save();
            ctx1.translate(200, 200);
            ctx1.rotate(triangleAngle * Math.PI / 180);
            ctx1.beginPath();
            for (let i = 0; i < 3; i++) {
                const angle = (i * 120 - 90) * Math.PI / 180;
                const x = Math.cos(angle) * 80;
                const y = Math.sin(angle) * 80;
                if (i === 0) ctx1.moveTo(x, y);
                else ctx1.lineTo(x, y);
            }
            ctx1.closePath();
            ctx1.strokeStyle = '#3498db';
            ctx1.lineWidth = 3;
            ctx1.stroke();
            ctx1.fillStyle = 'rgba(52, 152, 219, 0.2)';
            ctx1.fill();
            
            // Mark vertices
            for (let i = 0; i < 3; i++) {
                const angle = (i * 120 - 90) * Math.PI / 180;
                const x = Math.cos(angle) * 80;
                const y = Math.sin(angle) * 80;
                ctx1.beginPath();
                ctx1.arc(x, y, 5, 0, Math.PI * 2);
                ctx1.fillStyle = '#e74c3c';
                ctx1.fill();
            }
            ctx1.restore();
            
            // Label
            ctx1.fillStyle = '#2c3e50';
            ctx1.font = 'bold 16px Arial';
            ctx1.textAlign = 'center';
            ctx1.fillText('Discrete: 6 States', 200, 350);
            
            // Draw circle
            ctx1.save();
            ctx1.translate(600, 200);
            ctx1.rotate(circleAngle * Math.PI / 180);
            
            // Draw circle
            ctx1.beginPath();
            ctx1.arc(0, 0, 80, 0, Math.PI * 2);
            ctx1.strokeStyle = '#2ecc71';
            ctx1.lineWidth = 3;
            ctx1.stroke();
            ctx1.fillStyle = 'rgba(46, 204, 113, 0.2)';
            ctx1.fill();
            
            // Draw radius to show rotation
            ctx1.beginPath();
            ctx1.moveTo(0, 0);
            ctx1.lineTo(80, 0);
            ctx1.strokeStyle = '#e74c3c';
            ctx1.lineWidth = 2;
            ctx1.stroke();
            
            // Mark point
            ctx1.beginPath();
            ctx1.arc(80, 0, 6, 0, Math.PI * 2);
            ctx1.fillStyle = '#e74c3c';
            ctx1.fill();
            
            ctx1.restore();
            
            // Label
            ctx1.fillStyle = '#2c3e50';
            ctx1.font = 'bold 16px Arial';
            ctx1.textAlign = 'center';
            ctx1.fillText('Continuous: âˆž States', 600, 350);
        }
        
        document.getElementById('triangleRotation').addEventListener('input', drawDiscreteVsContinuous);
        document.getElementById('circleRotation').addEventListener('input', drawDiscreteVsContinuous);
        drawDiscreteVsContinuous();
        
        // Manifold View
        const canvas2 = document.getElementById('manifoldView');
        const ctx2 = canvas2.getContext('2d');
        let allPointsShown = false;
        
        function drawManifoldView() {
            ctx2.clearRect(0, 0, canvas2.width, canvas2.height);
            
            const angle = parseFloat(document.getElementById('rotationAngle').value);
            document.getElementById('angleValue').textContent = angle.toFixed(1) + 'Â°';
            
            // Left side: Physical rotation
            ctx2.save();
            ctx2.translate(200, 250);
            
            // Draw reference circle
            ctx2.beginPath();
            ctx2.arc(0, 0, 100, 0, Math.PI * 2);
            ctx2.strokeStyle = '#ddd';
            ctx2.lineWidth = 2;
            ctx2.stroke();
            
            // Draw rotated disk
            ctx2.save();
            ctx2.rotate(angle * Math.PI / 180);
            
            // Draw disk with marker
            ctx2.beginPath();
            ctx2.arc(0, 0, 100, 0, Math.PI * 2);
            ctx2.fillStyle = 'rgba(52, 152, 219, 0.3)';
            ctx2.fill();
            ctx2.strokeStyle = '#3498db';
            ctx2.lineWidth = 3;
            ctx2.stroke();
            
            // Draw radius marker
            ctx2.beginPath();
            ctx2.moveTo(0, 0);
            ctx2.lineTo(100, 0);
            ctx2.strokeStyle = '#e74c3c';
            ctx2.lineWidth = 3;
            ctx2.stroke();
            
            // Mark end point
            ctx2.beginPath();
            ctx2.arc(100, 0, 7, 0, Math.PI * 2);
            ctx2.fillStyle = '#e74c3c';
            ctx2.fill();
            
            ctx2.restore();
            ctx2.restore();
            
            // Label
            ctx2.fillStyle = '#2c3e50';
            ctx2.font = 'bold 18px Arial';
            ctx2.textAlign = 'center';
            ctx2.fillText('Physical Space', 200, 420);
            ctx2.font = '14px Arial';
            ctx2.fillText('(The rotating object)', 200, 440);
            
            // Right side: Group manifold
            ctx2.save();
            ctx2.translate(600, 250);
            
            // Draw group circle
            ctx2.beginPath();
            ctx2.arc(0, 0, 120, 0, Math.PI * 2);
            ctx2.strokeStyle = '#888';
            ctx2.lineWidth = 2;
            ctx2.stroke();
            
            // Show all points if toggled
            if (allPointsShown) {
                ctx2.fillStyle = 'rgba(46, 204, 113, 0.5)';
                for (let a = 0; a < 360; a += 2) {
                    const rad = a * Math.PI / 180;
                    const x = Math.cos(rad) * 120;
                    const y = Math.sin(rad) * 120;
                    ctx2.beginPath();
                    ctx2.arc(x, y, 2, 0, Math.PI * 2);
                    ctx2.fill();
                }
            }
            
            // Draw current point
            const rad = angle * Math.PI / 180;
            const x = Math.cos(rad) * 120;
            const y = Math.sin(rad) * 120;
            
            ctx2.beginPath();
            ctx2.arc(x, y, 8, 0, Math.PI * 2);
            ctx2.fillStyle = '#e74c3c';
            ctx2.fill();
            ctx2.strokeStyle = 'white';
            ctx2.lineWidth = 2;
            ctx2.stroke();
            
            // Draw arrow to point
            ctx2.beginPath();
            ctx2.moveTo(0, 0);
            ctx2.lineTo(x, y);
            ctx2.strokeStyle = 'rgba(231, 76, 60, 0.3)';
            ctx2.lineWidth = 2;
            ctx2.setLineDash([5, 5]);
            ctx2.stroke();
            ctx2.setLineDash([]);
            
            ctx2.restore();
            
            // Label
            ctx2.fillStyle = '#2c3e50';
            ctx2.font = 'bold 18px Arial';
            ctx2.textAlign = 'center';
            ctx2.fillText('Group Space SO(2)', 600, 420);
            ctx2.font = '14px Arial';
            ctx2.fillText('(Each rotation = one point)', 600, 440);
            
            // Draw arrow connecting the two
            ctx2.beginPath();
            ctx2.moveTo(320, 250);
            ctx2.lineTo(460, 250);
            ctx2.strokeStyle = '#7f8c8d';
            ctx2.lineWidth = 2;
            ctx2.stroke();
            
            // Arrowhead
            ctx2.beginPath();
            ctx2.moveTo(460, 250);
            ctx2.lineTo(450, 245);
            ctx2.lineTo(450, 255);
            ctx2.closePath();
            ctx2.fillStyle = '#7f8c8d';
            ctx2.fill();
            
            ctx2.fillStyle = '#7f8c8d';
            ctx2.font = '14px Arial';
            ctx2.textAlign = 'center';
            ctx2.fillText('represents as', 390, 235);
        }
        
        document.getElementById('rotationAngle').addEventListener('input', drawManifoldView);
        
        document.getElementById('animateRotation').addEventListener('click', () => {
            let angle = 0;
            const slider = document.getElementById('rotationAngle');
            const interval = setInterval(() => {
                angle += 2;
                if (angle > 360) {
                    clearInterval(interval);
                    angle = 0;
                }
                slider.value = angle;
                drawManifoldView();
            }, 20);
        });
        
        document.getElementById('showAllPoints').addEventListener('click', () => {
            allPointsShown = !allPointsShown;
            document.getElementById('showAllPoints').textContent = 
                allPointsShown ? 'Hide Rotation Points' : 'Show All Rotation Points';
            drawManifoldView();
        });
        
        drawManifoldView();
        
        // Tangent Space
        const canvas3 = document.getElementById('tangentSpace');
        const ctx3 = canvas3.getContext('2d');
        
        function drawTangentSpace() {
            ctx3.clearRect(0, 0, canvas3.width, canvas3.height);
            
            const zoom = parseFloat(document.getElementById('zoomLevel').value);
            const pointAngle = parseFloat(document.getElementById('circlePoint').value);
            
            document.getElementById('zoomValue').textContent = zoom.toFixed(1) + 'Ã—';
            document.getElementById('pointValue').textContent = pointAngle + 'Â°';
            
            ctx3.save();
            ctx3.translate(400, 250);
            
            // Calculate base radius that will be scaled
            const baseRadius = 80;
            const displayRadius = baseRadius * zoom;
            
            // Calculate the point of tangency
            const rad = pointAngle * Math.PI / 180;
            const tangentX = Math.cos(rad) * baseRadius;
            const tangentY = Math.sin(rad) * baseRadius;
            
            // Translate so tangent point is at center when zoomed
            ctx3.translate(-tangentX * (zoom - 1), -tangentY * (zoom - 1));
            
            // Clip to canvas
            ctx3.beginPath();
            ctx3.rect(-400, -250, 800, 500);
            ctx3.clip();
            
            // Draw circle
            ctx3.beginPath();
            ctx3.arc(0, 0, displayRadius, 0, Math.PI * 2);
            ctx3.strokeStyle = '#3498db';
            ctx3.lineWidth = 3;
            ctx3.stroke();
            ctx3.fillStyle = 'rgba(52, 152, 219, 0.1)';
            ctx3.fill();
            
            // Draw tangent line
            const tangentAngle = rad + Math.PI / 2;
            const lineLength = 400;
            const tx1 = tangentX + Math.cos(tangentAngle) * lineLength;
            const ty1 = tangentY + Math.sin(tangentAngle) * lineLength;
            const tx2 = tangentX - Math.cos(tangentAngle) * lineLength;
            const ty2 = tangentY - Math.sin(tangentAngle) * lineLength;
            
            ctx3.beginPath();
            ctx3.moveTo(tx1, ty1);
            ctx3.lineTo(tx2, ty2);
            ctx3.strokeStyle = '#e74c3c';
            ctx3.lineWidth = 2;
            ctx3.stroke();
            
            // Draw tangent point
            ctx3.beginPath();
            ctx3.arc(tangentX, tangentY, 6, 0, Math.PI * 2);
            ctx3.fillStyle = '#e74c3c';
            ctx3.fill();
            ctx3.strokeStyle = 'white';
            ctx3.lineWidth = 2;
            ctx3.stroke();
            
            // Draw grid for reference at high zoom
            if (zoom > 10) {
                ctx3.strokeStyle = 'rgba(0, 0, 0, 0.1)';
                ctx3.lineWidth = 1;
                const gridSize = 20;
                for (let x = -400; x < 400; x += gridSize) {
                    ctx3.beginPath();
                    ctx3.moveTo(x, -250);
                    ctx3.lineTo(x, 250);
                    ctx3.stroke();
                }
                for (let y = -250; y < 250; y += gridSize) {
                    ctx3.beginPath();
                    ctx3.moveTo(-400, y);
                    ctx3.lineTo(400, y);
                    ctx3.stroke();
                }
            }
            
            ctx3.restore();
            
            // Labels
            ctx3.fillStyle = '#3498db';
            ctx3.font = 'bold 16px Arial';
            ctx3.textAlign = 'left';
            ctx3.fillText('Circle (Group Manifold)', 20, 30);
            
            ctx3.fillStyle = '#e74c3c';
            ctx3.fillText('Tangent Line (Lie Algebra)', 20, 55);
            
            // Zoom indicator
            ctx3.fillStyle = '#2c3e50';
            ctx3.font = '14px Arial';
            ctx3.textAlign = 'right';
            if (zoom < 5) {
                ctx3.fillText('Zoom in to see the tangent approximation', 780, 30);
            } else if (zoom < 30) {
                ctx3.fillText('Notice the curve flattening...', 780, 30);
            } else {
                ctx3.fillText('At this scale, curve â‰ˆ line!', 780, 30);
            }
        }
        
        document.getElementById('zoomLevel').addEventListener('input', drawTangentSpace);
        document.getElementById('circlePoint').addEventListener('input', drawTangentSpace);
        drawTangentSpace();
        
        // Algebra to Group
        const canvas4 = document.getElementById('algebraToGroup');
        const ctx4 = canvas4.getContext('2d');
        
        function drawAlgebraToGroup() {
            ctx4.clearRect(0, 0, canvas4.width, canvas4.height);
            
            const generatorLength = parseFloat(document.getElementById('generatorLength').value);
            const flowTime = parseFloat(document.getElementById('flowTime').value);
            
            document.getElementById('generatorValue').textContent = generatorLength.toFixed(2);
            document.getElementById('timeValue').textContent = flowTime.toFixed(2);
            
            // Left side: Lie Algebra (tangent space)
            ctx4.save();
            ctx4.translate(200, 250);
            
            // Draw tangent line
            ctx4.beginPath();
            ctx4.moveTo(-150, 0);
            ctx4.lineTo(150, 0);
            ctx4.strokeStyle = '#888';
            ctx4.lineWidth = 2;
            ctx4.stroke();
            
            // Draw origin
            ctx4.beginPath();
            ctx4.arc(0, 0, 5, 0, Math.PI * 2);
            ctx4.fillStyle = '#666';
            ctx4.fill();
            
            // Draw generator vector
            const vectorScale = 50;
            const vectorLength = generatorLength * vectorScale;
            
            ctx4.beginPath();
            ctx4.moveTo(0, 0);
            ctx4.lineTo(0, -vectorLength);
            ctx4.strokeStyle = '#e74c3c';
            ctx4.lineWidth = 4;
            ctx4.stroke();
            
            // Arrowhead
            ctx4.beginPath();
            ctx4.moveTo(0, -vectorLength);
            ctx4.lineTo(-6, -vectorLength + 10);
            ctx4.lineTo(6, -vectorLength + 10);
            ctx4.closePath();
            ctx4.fillStyle = '#e74c3c';
            ctx4.fill();
            
            // Label vector
            ctx4.fillStyle = '#e74c3c';
            ctx4.font = 'bold 16px Arial';
            ctx4.textAlign = 'left';
            ctx4.fillText('v = ' + generatorLength.toFixed(2), 15, -vectorLength / 2);
            
            ctx4.restore();
            
            // Label
            ctx4.fillStyle = '#2c3e50';
            ctx4.font = 'bold 18px Arial';
            ctx4.textAlign = 'center';
            ctx4.fillText('Lie Algebra ð”°ð”¬(2)', 200, 420);
            ctx4.font = '14px Arial';
            ctx4.fillText('(Tangent space at identity)', 200, 440);
            
            // Right side: Lie Group (manifold)
            ctx4.save();
            ctx4.translate(600, 250);
            
            // Draw group circle
            const radius = 100;
            ctx4.beginPath();
            ctx4.arc(0, 0, radius, 0, Math.PI * 2);
            ctx4.strokeStyle = '#888';
            ctx4.lineWidth = 2;
            ctx4.stroke();
            
            // Calculate position on circle via exponential map
            // exp(t * v) maps to rotation by angle = t * ||v||
            const totalAngle = flowTime * generatorLength;
            const currentAngle = totalAngle;
            
            // Draw path traced so far
            if (flowTime > 0) {
                ctx4.beginPath();
                ctx4.strokeStyle = 'rgba(46, 204, 113, 0.4)';
                ctx4.lineWidth = 3;
                for (let t = 0; t <= flowTime; t += 0.1) {
                    const angle = t * generatorLength;
                    const x = Math.sin(angle) * radius;
                    const y = -Math.cos(angle) * radius;
                    if (t === 0) ctx4.moveTo(x, y);
                    else ctx4.lineTo(x, y);
                }
                ctx4.stroke();
            }
            
            // Draw identity element (top of circle)
            ctx4.beginPath();
            ctx4.arc(0, -radius, 6, 0, Math.PI * 2);
            ctx4.fillStyle = '#666';
            ctx4.fill();
            ctx4.strokeStyle = 'white';
            ctx4.lineWidth = 2;
            ctx4.stroke();
            
            // Draw current position
            const x = Math.sin(currentAngle) * radius;
            const y = -Math.cos(currentAngle) * radius;
            
            ctx4.beginPath();
            ctx4.arc(x, y, 8, 0, Math.PI * 2);
            ctx4.fillStyle = '#e74c3c';
            ctx4.fill();
            ctx4.strokeStyle = 'white';
            ctx4.lineWidth = 2;
            ctx4.stroke();
            
            // Draw velocity vector at current position (tangent to circle)
            if (flowTime > 0 && generatorLength > 0) {
                const tangentAngle = currentAngle + Math.PI / 2;
                const velocityLength = generatorLength * 30;
                const vx = Math.cos(tangentAngle) * velocityLength;
                const vy = Math.sin(tangentAngle) * velocityLength;
                
                ctx4.beginPath();
                ctx4.moveTo(x, y);
                ctx4.lineTo(x + vx, y + vy);
                ctx4.strokeStyle = '#9b59b6';
                ctx4.lineWidth = 3;
                ctx4.stroke();
                
                // Small arrowhead
                const headAngle = Math.atan2(vy, vx);
                ctx4.save();
                ctx4.translate(x + vx, y + vy);
                ctx4.rotate(headAngle);
                ctx4.beginPath();
                ctx4.moveTo(0, 0);
                ctx4.lineTo(-8, -4);
                ctx4.lineTo(-8, 4);
                ctx4.closePath();
                ctx4.fillStyle = '#9b59b6';
                ctx4.fill();
                ctx4.restore();
            }
            
            ctx4.restore();
            
            // Label
            ctx4.fillStyle = '#2c3e50';
            ctx4.font = 'bold 18px Arial';
            ctx4.textAlign = 'center';
            ctx4.fillText('Lie Group SO(2)', 600, 420);
            ctx4.font = '14px Arial';
            ctx4.fillText('(Rotations = points on circle)', 600, 440);
            
            // Draw arrow and label showing exponential map
            ctx4.beginPath();
            ctx4.moveTo(320, 250);
            ctx4.lineTo(460, 250);
            ctx4.strokeStyle = '#27ae60';
            ctx4.lineWidth = 3;
            ctx4.stroke();
            
            // Arrowhead
            ctx4.beginPath();
            ctx4.moveTo(460, 250);
            ctx4.lineTo(450, 245);
            ctx4.lineTo(450, 255);
            ctx4.closePath();
            ctx4.fillStyle = '#27ae60';
            ctx4.fill();
            
            ctx4.fillStyle = '#27ae60';
            ctx4.font = 'bold 16px Arial';
            ctx4.textAlign = 'center';
            ctx4.fillText('exp map', 390, 235);
            ctx4.font = '12px Arial';
            ctx4.fillText('(flow for time t)', 390, 252);
            
            // Show rotation angle achieved
            if (flowTime > 0) {
                ctx4.fillStyle = '#2c3e50';
                ctx4.font = '14px Arial';
                ctx4.textAlign = 'right';
                ctx4.fillText('Rotation: ' + (currentAngle * 180 / Math.PI).toFixed(1) + 'Â°', 780, 30);
            }
        }
        
        document.getElementById('generatorLength').addEventListener('input', drawAlgebraToGroup);
        document.getElementById('flowTime').addEventListener('input', drawAlgebraToGroup);
        
        document.getElementById('animateFlow').addEventListener('click', () => {
            let t = 0;
            const slider = document.getElementById('flowTime');
            const maxT = 6.28;
            const interval = setInterval(() => {
                t += 0.05;
                if (t > maxT) {
                    clearInterval(interval);
                    t = maxT;
                }
                slider.value = t;
                drawAlgebraToGroup();
            }, 30);
        });
        
        drawAlgebraToGroup();
    </script>
</body>
</html>