<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Physics Dashboard - Explorable Explanation</title>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Fira+Code:wght@400;700&family=Merriweather:wght@300;400;700&display=swap');
        
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            font-family: 'Merriweather', serif;
            background: linear-gradient(135deg, #1a1a2e 0%, #16213e 50%, #0f3460 100%);
            color: #e8e8e8;
            padding: 40px 20px;
            line-height: 1.8;
        }
        
        .container {
            max-width: 1400px;
            margin: 0 auto;
        }
        
        h1 {
            font-size: 48px;
            color: #4ecdc4;
            text-align: center;
            margin-bottom: 10px;
            text-shadow: 0 0 20px rgba(78, 205, 196, 0.6);
        }
        
        .subtitle {
            text-align: center;
            font-size: 18px;
            color: #ff6b35;
            margin-bottom: 40px;
            font-style: italic;
        }
        
        .explanation {
            background: rgba(255, 255, 255, 0.05);
            border-left: 4px solid #4ecdc4;
            padding: 20px;
            margin: 30px 0;
            border-radius: 8px;
        }
        
        .explanation h2 {
            color: #4ecdc4;
            font-size: 24px;
            margin-bottom: 15px;
        }
        
        .interactive-section {
            background: rgba(0, 0, 0, 0.3);
            border: 2px solid #4ecdc4;
            border-radius: 12px;
            padding: 30px;
            margin: 30px 0;
            box-shadow: 0 8px 32px rgba(0, 0, 0, 0.3);
        }
        
        .interactive-section h3 {
            color: #ff6b35;
            font-size: 20px;
            margin-bottom: 20px;
            font-family: 'Fira Code', monospace;
        }
        
        .equation {
            font-family: 'Fira Code', monospace;
            font-size: 24px;
            color: #4ecdc4;
            text-align: center;
            margin: 20px 0;
            padding: 15px;
            background: rgba(78, 205, 196, 0.1);
            border-radius: 8px;
        }
        
        .equation-var {
            color: #ff6b35;
            font-weight: 700;
        }
        
        .control-panel {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 20px;
            margin: 25px 0;
        }
        
        .control {
            background: rgba(255, 255, 255, 0.05);
            padding: 15px;
            border-radius: 8px;
            border: 1px solid rgba(78, 205, 196, 0.3);
        }
        
        .control label {
            display: block;
            font-size: 12px;
            color: #4ecdc4;
            text-transform: uppercase;
            margin-bottom: 8px;
            letter-spacing: 1px;
            font-family: 'Fira Code', monospace;
        }
        
        input[type="range"] {
            width: 100%;
            height: 4px;
            background: rgba(255, 255, 255, 0.2);
            border-radius: 2px;
            outline: none;
            -webkit-appearance: none;
            margin: 10px 0;
        }
        
        input[type="range"]::-webkit-slider-thumb {
            -webkit-appearance: none;
            width: 16px;
            height: 16px;
            background: linear-gradient(135deg, #4ecdc4, #ff6b35);
            border-radius: 50%;
            cursor: pointer;
            box-shadow: 0 0 12px rgba(255, 107, 53, 0.8);
        }
        
        .value-display {
            font-family: 'Fira Code', monospace;
            font-size: 20px;
            color: #ff6b35;
            font-weight: 700;
            margin-top: 5px;
        }
        
        .chart-container {
            background: rgba(0, 0, 0, 0.5);
            border-radius: 10px;
            padding: 20px;
            margin: 20px 0;
        }
        
        canvas {
            display: block;
            max-width: 100%;
            border-radius: 8px;
        }
        
        .metrics-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 15px;
            margin: 25px 0;
        }
        
        .metric-card {
            background: linear-gradient(135deg, rgba(78, 205, 196, 0.1), rgba(255, 107, 53, 0.1));
            border: 2px solid rgba(78, 205, 196, 0.3);
            border-radius: 10px;
            padding: 20px;
            text-align: center;
        }
        
        .metric-label {
            font-size: 12px;
            color: #4ecdc4;
            text-transform: uppercase;
            letter-spacing: 1px;
            margin-bottom: 10px;
            font-family: 'Fira Code', monospace;
        }
        
        .metric-value {
            font-size: 36px;
            color: #ff6b35;
            font-weight: 700;
            font-family: 'Fira Code', monospace;
        }
        
        .metric-unit {
            font-size: 16px;
            color: #aaa;
        }
        
        .energy-bar {
            width: 100%;
            height: 30px;
            background: rgba(0, 0, 0, 0.5);
            border-radius: 15px;
            overflow: hidden;
            position: relative;
            margin: 15px 0;
        }
        
        .energy-fill {
            height: 100%;
            background: linear-gradient(90deg, #4ecdc4, #ff6b35);
            transition: width 0.3s;
            box-shadow: 0 0 20px rgba(78, 205, 196, 0.6);
        }
        
        .energy-label {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            font-family: 'Fira Code', monospace;
            font-size: 14px;
            font-weight: 700;
            color: #fff;
            text-shadow: 0 0 5px #000;
        }
        
        .insight-box {
            background: linear-gradient(135deg, rgba(168, 85, 247, 0.1), rgba(255, 107, 53, 0.1));
            border-left: 4px solid #a855f7;
            padding: 20px;
            margin: 25px 0;
            border-radius: 8px;
        }
        
        .insight-box h4 {
            color: #a855f7;
            font-size: 18px;
            margin-bottom: 10px;
        }
        
        .formula-breakdown {
            background: rgba(0, 0, 0, 0.3);
            border-radius: 8px;
            padding: 20px;
            margin: 20px 0;
            font-family: 'Fira Code', monospace;
        }
        
        .formula-line {
            padding: 8px 0;
            border-bottom: 1px dashed rgba(255, 255, 255, 0.1);
        }
        
        .formula-line:last-child {
            border-bottom: none;
        }
        
        button {
            background: linear-gradient(135deg, #4ecdc4, #a855f7);
            color: white;
            border: none;
            padding: 12px 30px;
            border-radius: 8px;
            font-family: 'Fira Code', monospace;
            font-size: 14px;
            cursor: pointer;
            box-shadow: 0 4px 15px rgba(78, 205, 196, 0.4);
            transition: all 0.3s;
            margin: 10px 5px;
        }
        
        button:hover {
            transform: translateY(-2px);
            box-shadow: 0 6px 20px rgba(78, 205, 196, 0.6);
        }
        
        .simulation-controls {
            display: flex;
            justify-content: center;
            gap: 15px;
            margin: 30px 0;
        }
        
        .highlight {
            background: rgba(255, 107, 53, 0.2);
            padding: 2px 6px;
            border-radius: 4px;
            font-family: 'Fira Code', monospace;
            color: #ff6b35;
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>⚡ Sound Ninjutsu Physics Dashboard</h1>
        <div class="subtitle">An Explorable Explanation of Lagrangian Mechanics Through Bouncing Balls</div>
        
        <div class="explanation">
            <h2>The Core Insight</h2>
            <p>
                When you drop a ball, something magical happens: <strong>time symmetry</strong> creates a 
                conservation law. Between bounces, the ball's total energy <span class="highlight">E = KE + PE</span> 
                remains constant. At each impact, some energy transforms into sound and heat, but we can measure 
                this loss by listening to the bounce intervals.
            </p>
        </div>
        
        <div class="interactive-section">
            <h3>🎯 Interactive Physics Simulation</h3>
            
            <div class="control-panel">
                <div class="control">
                    <label>Initial Height h₀</label>
                    <input type="range" id="h0" min="0.5" max="5" step="0.1" value="3">
                    <div class="value-display"><span id="h0-val">3.0</span> m</div>
                </div>
                
                <div class="control">
                    <label>Coefficient of Restitution e</label>
                    <input type="range" id="e" min="0.5" max="0.98" step="0.01" value="0.8">
                    <div class="value-display"><span id="e-val">0.80</span></div>
                </div>
                
                <div class="control">
                    <label>Gravity g</label>
                    <input type="range" id="g" min="5" max="15" step="0.1" value="9.81">
                    <div class="value-display"><span id="g-val">9.81</span> m/s²</div>
                </div>
                
                <div class="control">
                    <label>Mass m</label>
                    <input type="range" id="m" min="0.1" max="1" step="0.05" value="0.45">
                    <div class="value-display"><span id="m-val">0.45</span> kg</div>
                </div>
            </div>
            
            <div class="simulation-controls">
                <button onclick="startSimulation()">▶️ START</button>
                <button onclick="pauseSimulation()">⏸️ PAUSE</button>
                <button onclick="resetSimulation()">🔄 RESET</button>
            </div>
            
            <div class="metrics-grid">
                <div class="metric-card">
                    <div class="metric-label">Current Height</div>
                    <div class="metric-value" id="current-h">0.00</div>
                    <div class="metric-unit">meters</div>
                </div>
                
                <div class="metric-card">
                    <div class="metric-label">Velocity</div>
                    <div class="metric-value" id="current-v">0.00</div>
                    <div class="metric-unit">m/s</div>
                </div>
                
                <div class="metric-card">
                    <div class="metric-label">Kinetic Energy</div>
                    <div class="metric-value" id="ke">0.00</div>
                    <div class="metric-unit">joules</div>
                </div>
                
                <div class="metric-card">
                    <div class="metric-label">Potential Energy</div>
                    <div class="metric-value" id="pe">0.00</div>
                    <div class="metric-unit">joules</div>
                </div>
            </div>
            
            <div class="energy-bar">
                <div class="energy-fill" id="energy-fill" style="width: 100%"></div>
                <div class="energy-label" id="energy-label">100% Energy</div>
            </div>
        </div>
        
        <div class="interactive-section">
            <h3>📊 Live Energy Visualization</h3>
            <div class="chart-container">
                <canvas id="energy-chart" width="1200" height="400"></canvas>
            </div>
        </div>
        
        <div class="explanation">
            <h2>The Mathematics</h2>
            
            <div class="equation">
                E = <span class="equation-var">½mv²</span> + <span class="equation-var">mgh</span>
            </div>
            
            <div class="formula-breakdown">
                <div class="formula-line">
                    <strong>Kinetic Energy:</strong> KE = ½mv² 
                    <span style="color: #4ecdc4;"> (energy of motion)</span>
                </div>
                <div class="formula-line">
                    <strong>Potential Energy:</strong> PE = mgh 
                    <span style="color: #4ecdc4;"> (energy of position)</span>
                </div>
                <div class="formula-line">
                    <strong>Total Energy:</strong> E = KE + PE 
                    <span style="color: #4ecdc4;"> (conserved between bounces)</span>
                </div>
                <div class="formula-line">
                    <strong>Height from Time:</strong> h = gt²/8 
                    <span style="color: #4ecdc4;"> (parabolic trajectory)</span>
                </div>
                <div class="formula-line">
                    <strong>Restitution:</strong> e ≈ t_{n+1}/t_n 
                    <span style="color: #4ecdc4;"> (from bounce intervals)</span>
                </div>
                <div class="formula-line">
                    <strong>Next Height:</strong> h_{n+1} = e²h_n 
                    <span style="color: #4ecdc4;"> (geometric decay)</span>
                </div>
            </div>
        </div>
        
        <div class="insight-box">
            <h4>💡 Key Insight: Time Symmetry → Energy Conservation</h4>
            <p>
                Emmy Noether proved that every continuous symmetry corresponds to a conservation law. 
                Since the laws of physics don't change from moment to moment (time translation symmetry), 
                energy must be conserved. This deep connection between symmetry and conservation is one of 
                the most beautiful theorems in physics.
            </p>
        </div>
        
        <div class="interactive-section">
            <h3>📈 Phase Space Trajectory</h3>
            <p style="margin-bottom: 20px;">
                Phase space plots show the relationship between height and velocity. Watch how the ball 
                traces out spiraling loops that gradually decay toward the origin.
            </p>
            <div class="chart-container">
                <canvas id="phase-chart" width="600" height="600"></canvas>
            </div>
        </div>
        
        <div class="interactive-section">
            <h3>🎵 Sound Sensing Technique</h3>
            <p>
                By measuring the time intervals between bounces, you can calculate the coefficient of 
                restitution <em>without</em> measuring height directly:
            </p>
            
            <div class="equation">
                e ≈ <span class="equation-var">t_{n+1}</span> / <span class="equation-var">t_n</span>
            </div>
            
            <p style="margin-top: 20px;">
                This is the "Sound Ninjutsu" technique: your ears become calculators, extracting physics 
                from audio alone!
            </p>
        </div>
        
        <div class="explanation">
            <h2>Try This Experiment</h2>
            <ol style="margin-left: 30px; margin-top: 15px;">
                <li style="margin: 10px 0;">Adjust the parameters above and watch how the system responds</li>
                <li style="margin: 10px 0;">Try e = 0.95 (basketball) vs e = 0.6 (soft clay ball)</li>
                <li style="margin: 10px 0;">Increase gravity to see faster bounces</li>
                <li style="margin: 10px 0;">Notice how energy decays exponentially with each bounce</li>
                <li style="margin: 10px 0;">Observe the phase space spiral converging to (0, 0)</li>
            </ol>
        </div>
    </div>

    <script>
        // State
        const sim = {
            running: false,
            t: 0,
            h: 3.0,
            v: 0,
            bounceCount: 0,
            history: {
                t: [],
                h: [],
                v: [],
                ke: [],
                pe: [],
                total: []
            },
            params: {
                h0: 3.0,
                e: 0.8,
                g: 9.81,
                m: 0.45
            }
        };
        
        // Canvases
        let energyCanvas, energyCtx;
        let phaseCanvas, phaseCtx;
        
        function init() {
            energyCanvas = document.getElementById('energy-chart');
            energyCtx = energyCanvas.getContext('2d');
            
            phaseCanvas = document.getElementById('phase-chart');
            phaseCtx = phaseCanvas.getContext('2d');
            
            setupControls();
            resetSimulation();
        }
        
        function setupControls() {
            ['h0', 'e', 'g', 'm'].forEach(id => {
                const slider = document.getElementById(id);
                slider.addEventListener('input', (e) => {
                    sim.params[id] = parseFloat(e.target.value);
                    document.getElementById(id + '-val').textContent = 
                        id === 'h0' ? sim.params[id].toFixed(1) : sim.params[id].toFixed(2);
                    if (!sim.running) resetSimulation();
                });
            });
        }
        
        function startSimulation() {
            sim.running = true;
        }
        
        function pauseSimulation() {
            sim.running = false;
        }
        
        function resetSimulation() {
            sim.t = 0;
            sim.h = sim.params.h0;
            sim.v = 0;
            sim.bounceCount = 0;
            sim.history = { t: [], h: [], v: [], ke: [], pe: [], total: [] };
            updateMetrics();
        }
        
        function updatePhysics(dt) {
            if (!sim.running) return;
            
            // Euler integration
            sim.v -= sim.params.g * dt;
            sim.h += sim.v * dt;
            
            // Ground collision
            if (sim.h <= 0) {
                sim.h = 0;
                if (Math.abs(sim.v) > 0.01) {
                    sim.v *= -sim.params.e;
                    sim.bounceCount++;
                } else {
                    sim.v = 0;
                    sim.running = false;
                }
            }
            
            sim.t += dt;
            
            // Record history
            const ke = 0.5 * sim.params.m * sim.v * sim.v;
            const pe = sim.params.m * sim.params.g * sim.h;
            const total = ke + pe;
            
            sim.history.t.push(sim.t);
            sim.history.h.push(sim.h);
            sim.history.v.push(sim.v);
            sim.history.ke.push(ke);
            sim.history.pe.push(pe);
            sim.history.total.push(total);
            
            // Limit history
            if (sim.history.t.length > 1000) {
                Object.keys(sim.history).forEach(key => sim.history[key].shift());
            }
        }
        
        function updateMetrics() {
            document.getElementById('current-h').textContent = sim.h.toFixed(3);
            document.getElementById('current-v').textContent = Math.abs(sim.v).toFixed(3);
            
            const ke = 0.5 * sim.params.m * sim.v * sim.v;
            const pe = sim.params.m * sim.params.g * sim.h;
            const total = ke + pe;
            const initial = sim.params.m * sim.params.g * sim.params.h0;
            
            document.getElementById('ke').textContent = ke.toFixed(3);
            document.getElementById('pe').textContent = pe.toFixed(3);
            
            const percent = initial > 0 ? (total / initial) * 100 : 100;
            document.getElementById('energy-fill').style.width = percent + '%';
            document.getElementById('energy-label').textContent = percent.toFixed(1) + '% Energy';
        }
        
        function drawEnergyChart() {
            energyCtx.fillStyle = '#0a0a0a';
            energyCtx.fillRect(0, 0, energyCanvas.width, energyCanvas.height);
            
            if (sim.history.t.length < 2) return;
            
            const maxE = Math.max(...sim.history.total, 1);
            const maxT = Math.max(...sim.history.t, 1);
            
            const w = energyCanvas.width - 80;
            const h = energyCanvas.height - 60;
            const ox = 50;
            const oy = energyCanvas.height - 40;
            
            // Axes
            energyCtx.strokeStyle = '#4ecdc4';
            energyCtx.lineWidth = 2;
            energyCtx.beginPath();
            energyCtx.moveTo(ox, 20);
            energyCtx.lineTo(ox, oy);
            energyCtx.lineTo(ox + w, oy);
            energyCtx.stroke();
            
            // Labels
            energyCtx.fillStyle = '#4ecdc4';
            energyCtx.font = '12px Fira Code';
            energyCtx.fillText('Time (s)', ox + w / 2, oy + 30);
            energyCtx.save();
            energyCtx.translate(20, oy - h / 2);
            energyCtx.rotate(-Math.PI / 2);
            energyCtx.fillText('Energy (J)', 0, 0);
            energyCtx.restore();
            
            // Plot lines
            const drawLine = (data, color) => {
                energyCtx.strokeStyle = color;
                energyCtx.lineWidth = 2;
                energyCtx.beginPath();
                
                data.forEach((val, i) => {
                    const x = ox + (sim.history.t[i] / maxT) * w;
                    const y = oy - (val / maxE) * h;
                    
                    if (i === 0) energyCtx.moveTo(x, y);
                    else energyCtx.lineTo(x, y);
                });
                
                energyCtx.stroke();
            };
            
            drawLine(sim.history.total, '#4ecdc4');
            drawLine(sim.history.ke, '#ff6b35');
            drawLine(sim.history.pe, '#a855f7');
            
            // Legend
            energyCtx.font = '11px Fira Code';
            energyCtx.fillStyle = '#4ecdc4';
            energyCtx.fillText('Total', ox + w - 150, 40);
            energyCtx.fillStyle = '#ff6b35';
            energyCtx.fillText('Kinetic', ox + w - 150, 60);
            energyCtx.fillStyle = '#a855f7';
            energyCtx.fillText('Potential', ox + w - 150, 80);
        }
        
        function drawPhaseSpace() {
            phaseCtx.fillStyle = '#0a0a0a';
            phaseCtx.fillRect(0, 0, phaseCanvas.width, phaseCanvas.height);
            
            const w = phaseCanvas.width - 100;
            const h = phaseCanvas.height - 100;
            const ox = 60;
            const oy = phaseCanvas.height - 50;
            
            // Axes
            phaseCtx.strokeStyle = '#4ecdc4';
            phaseCtx.lineWidth = 2;
            phaseCtx.beginPath();
            phaseCtx.moveTo(ox, 30);
            phaseCtx.lineTo(ox, oy);
            phaseCtx.lineTo(ox + w, oy);
            phaseCtx.stroke();
            
            // Labels
            phaseCtx.fillStyle = '#4ecdc4';
            phaseCtx.font = '14px Fira Code';
            phaseCtx.fillText('Height (m)', ox + w / 2 - 40, oy + 35);
            phaseCtx.save();
            phaseCtx.translate(25, oy - h / 2);
            phaseCtx.rotate(-Math.PI / 2);
            phaseCtx.fillText('Velocity (m/s)', 0, 0);
            phaseCtx.restore();
            
            // Plot trajectory
            if (sim.history.h.length > 1) {
                const maxH = sim.params.h0;
                const maxV = Math.sqrt(2 * sim.params.g * maxH);
                
                phaseCtx.strokeStyle = '#ff6b35';
                phaseCtx.lineWidth = 2;
                phaseCtx.beginPath();
                
                sim.history.h.forEach((hVal, i) => {
                    const vVal = sim.history.v[i];
                    const x = ox + (hVal / maxH) * w;
                    const y = oy - ((vVal + maxV) / (2 * maxV)) * h;
                    
                    if (i === 0) phaseCtx.moveTo(x, y);
                    else phaseCtx.lineTo(x, y);
                });
                
                phaseCtx.stroke();
                
                // Current point
                if (sim.history.h.length > 0) {
                    const lastH = sim.history.h[sim.history.h.length - 1];
                    const lastV = sim.history.v[sim.history.v.length - 1];
                    const x = ox + (lastH / maxH) * w;
                    const y = oy - ((lastV + maxV) / (2 * maxV)) * h;
                    
                    phaseCtx.fillStyle = '#ff6b35';
                    phaseCtx.beginPath();
                    phaseCtx.arc(x, y, 6, 0, Math.PI * 2);
                    phaseCtx.fill();
                    
                    phaseCtx.shadowColor = '#ff6b35';
                    phaseCtx.shadowBlur = 15;
                    phaseCtx.fill();
                    phaseCtx.shadowBlur = 0;
                }
            }
        }
        
        // Animation loop
        function animate() {
            requestAnimationFrame(animate);
            
            updatePhysics(0.016);
            updateMetrics();
            drawEnergyChart();
            drawPhaseSpace();
        }
        
        init();
        animate();
    </script>
</body>
</html>
